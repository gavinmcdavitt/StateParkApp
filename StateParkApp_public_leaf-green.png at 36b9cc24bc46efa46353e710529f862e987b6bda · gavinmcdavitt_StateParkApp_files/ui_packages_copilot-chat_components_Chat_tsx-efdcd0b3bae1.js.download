"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_copilot-chat_components_Chat_tsx"],{19002:(e,t,s)=>{s.d(t,{A:()=>c});var n=s(74848),r=s(38621),i=s(55847),a=s(76206),o=s(47050),l=s(20458);function c(){let{mode:e}=(0,o.Pk)(),t=(0,l.b)();return(0,n.jsx)(i.Q,{leadingVisual:r.ArrowLeftIcon,variant:"invisible",onClick:()=>(0,a.s0)(t.showTopicPicker,e),sx:{color:"fg.muted",marginLeft:"assistive"===e?"-8px":void 0},children:"All repositories"})}try{c.displayName||(c.displayName="AllTopicsButton")}catch{}},39694:(e,t,s)=>{s.d(t,{r:()=>e0});var n,r=s(74848),i=s(51848),a=s(38621),o=s(82678),l=s(75177),c=s(38553),d=s(55847),u=s(84217),p=s(52464),x=s(30729),h=s(96540),m=s(76206),g=s(57938),f=s(88365),b=s(47050),y=s(20458),j=s(92240),v=s(92836),w=s(51012),A=s(76049),k=s(61043),S=s(87330),C=s(25962),I=s(48962),N=s(13369),T=s(18754),R=s(69167);let z={"fade-in-duration":"InputTip-module__fade-in-duration--Go6O6"},W=()=>{let e=(0,h.useMemo)(()=>{let e=["Shift + Enter for new line","Type / for commands","Type @ for extensions","\u2191/\u2193 to cycle previous inputs"];return e[Math.floor(Math.random()*e.length)]},[]);return(0,r.jsx)("p",{className:`hide-sm mb-0 f6 fgColor-muted pointer-none anim-fade-in ${z["fade-in-duration"]}`,children:e})};try{W.displayName||(W.displayName="InputTip")}catch{}var E=s(94718),L=s(52057);let D=e=>{let t=(0,b.Pk)(),s=(0,y.b)(),n=(0,N.c)(),{selectedThreadID:i}=t,a=f.J.getSavedMessage(i),[o,c]=(0,h.useState)(a??""),[p,x]=(0,h.useState)(!1),S=(0,v.X)(["mac"]),z=(0,h.useRef)(null),D=e.textAreaRef||z,G=(0,h.useRef)(null),F=(0,h.useRef)(null),_=t.messages.filter(e=>"user"===e.role),B=(0,h.useRef)(0),H=g.W.copilotImmersiveV1&&"immersive"===t.mode,K=t.knowledgeBases.length>0,U=(0,h.useCallback)(async()=>{t.renderAttachKnowledgeBaseHerePopover&&await s.fetchKnowledgeBases()},[s,t.renderAttachKnowledgeBaseHerePopover]);(0,h.useEffect)(()=>{U()},[U]);let O=e=>S?e.metaKey:e.ctrlKey;(0,h.useEffect)(()=>{(async function(){let e=t.currentTopic;e&&(0,m.Z6)(e)&&void 0!==t.currentTopic&&await n.fetchAutocompleteSuggestions(e,"")})()},[n,t.currentTopic]),(0,h.useEffect)(()=>{f.J.setSavedMessage(i,o)},[i,o]),(0,w.N)(()=>{let e=0;!function t(){if(!D.current||!F.current||!G.current)return;e++,0===D.current.scrollHeight&&e<10&&setTimeout(t,1),D.current.style.height="0";let s=D.current.scrollHeight,n=Math.min(s,300);G.current.style.height=`${s}px`,D.current.style.height=`${s}px`,F.current.style.height=`${n}px`}()},[o,D,G]);let q=async e=>{x(!0),"Enter"!==e.key||e.shiftKey||e.ctrlKey||e.altKey||e.nativeEvent.isComposing?O(e)&&e.shiftKey&&"s"===e.key?(e.preventDefault(),await s.sendMessageToNewThread(i,o,t.currentReferences,t.context)):"ArrowUp"===e.key&&D.current&&(""===D.current.value||B.current>0)&&0===D.current.selectionStart&&_?.length>B.current?(e.preventDefault(),B.current++,c(_[_.length-B.current].content||"")):"ArrowDown"===e.key&&B.current>0&&D.current&&D.current.selectionStart===D.current.value.length&&(e.preventDefault(),B.current--,0===B.current?c(""):c(_[_.length-B.current].content||"")):(e.preventDefault(),await Q()),V()},V=(0,h.useCallback)(()=>{D?.current&&G?.current&&F?.current&&(G.current.scrollTop=D.current.scrollTop,G.current.scrollLeft=D.current.scrollLeft)},[D]),Q=async n=>{if(x(!1),t.defaultRecipient&&!o.includes(`@${t.defaultRecipient}`)&&(t.defaultRecipient=void 0),n?.preventDefault(),await (0,I.yO)(o,t,s)){"/new"===o.trim()&&f.J.setSavedMessageFast(i,null),c("");return}if(e.isLoading)e.onAbort?.();else{if(!o)return;c(""),await e.onSubmit?.(o)}},Y=(0,h.useCallback)(e=>{x(!0),D?.current&&(c(e.target.value),B.current=0,V())},[V,D]),J=t.currentTopic&&(0,m.Z6)(t.currentTopic),Z=t.renderKnowledgeBases&&(t.currentTopic&&(0,m.Z6)(t.currentTopic)||!t.currentTopic),X=o.length<3,ee=e.isLoading?`Copilot is responding\u{2026}`:t.defaultRecipient?void 0:"Ask Copilot";return t.defaultRecipient&&""===o&&!p&&c(`@${t.defaultRecipient} `),(0,r.jsxs)("div",{children:[(0,r.jsx)(A.A,{open:Z&&K&&t.renderAttachKnowledgeBaseHerePopover,sx:{bottom:"57px"},caret:"bottom-left",children:(0,r.jsxs)(A.A.Content,{sx:{mt:2,width:"300px"},className:"color-shadow-medium",children:[(0,r.jsx)(u.A,{as:"h4",sx:{fontSize:2,mb:2},children:"An organization has shared a knowledge base with you"}),(0,r.jsx)("p",{children:"Select a knowledge base to chat with Copilot and get answers from Markdown documentation stored in GitHub."}),(0,r.jsx)(d.Q,{onClick:()=>{s.dismissAttachKnowledgeBaseHerePopover()},children:"Got it"})]})}),(0,r.jsxs)(l.A,{className:"copilot-chat-input",...(0,j.G)("copilot-chat-input"),sx:{position:"relative",width:"100%",overflow:"hidden",display:"flex",backgroundColor:"canvas.default",border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"var(--borderRadius-medium)","> div":{flex:1},":focus-within .copilot-keyboard-shortcuts":{opacity:1,visibility:"visible"},":has(textarea:focus)":{outline:"2px solid var(--focus-outlineColor, var(--color-accent-emphasis))",borderColor:"transparent"}},children:[(0,r.jsxs)("div",{className:"d-flex position-absolute",style:{left:8,bottom:8},children:[Z&&(g.W.magicKBs?(0,r.jsx)(E.I8,{}):(0,r.jsx)(E.pV,{panelWidth:e.panelWidth})),J&&!g.W.magicKBs&&(0,r.jsx)(L.J,{panelWidth:e.panelWidth}),(0,r.jsx)(T.Q,{text:o,setText:c,textAreaRef:D})]}),(0,r.jsxs)(l.A,{as:"form",onSubmit:Q,className:"width-full d-flex flex-column gap-2",sx:{".copilot-chat-textarea::placeholder":{userSelect:"none"}},children:[(0,r.jsxs)(l.A,{ref:F,sx:{maxHeight:"30dvh",overflowY:"auto",flexGrow:1,position:"relative","> div":{display:"block"}},children:[(0,r.jsx)(R.j,{textAreaRef:D,children:(0,r.jsx)(k.Ay,{id:C.wg,className:"copilot-chat-textarea",autoComplete:"off",autoCorrect:"off",spellCheck:"false",role:"textbox","aria-multiline":"true",block:!0,ref:D,resize:"none",onKeyDown:q,onScroll:V,onInput:Y,placeholder:ee,value:o,sx:{border:"none",borderRadius:0,borderTopLeftRadius:"var(--borderRadius-medium)",borderTopRightRadius:"var(--borderRadius-medium)",display:"contents","> textarea":{position:"absolute",top:0,left:0,padding:"8px 12px 2px",background:"transparent",color:"transparent",caretColor:"var(--fgColor-default, var(--color-fg-default))",overflowY:"hidden",verticalAlign:"middle",resize:"none",zIndex:1},":focus-within":{boxShadow:"none"}}})}),(0,r.jsx)(P,{messages:t.messages,text:o,textareaPreviewRef:G,agents:t.agents,agentsPath:t.agentsPath})]}),(0,r.jsxs)("div",{className:"d-flex flex-items-center flex-justify-end gap-2 px-2 pb-2",children:[X&&!H&&(0,r.jsx)(W,{}),e.isStreaming?(0,r.jsx)(M,{onSubmit:()=>t.streamer&&s.stopStreaming(t.streamingMessage,t.streamer)}):(0,r.jsx)($,{isLoading:e.isLoading,onSubmit:Q})]})]})]})]})};function P({messages:e,text:t,textareaPreviewRef:s,agents:n,agentsPath:i}){let a=(0,y.b)(),[o,c]=(0,h.useState)(""),[d,u]=(0,h.useState)("");return(0,h.useEffect)(()=>{if(!s.current)return;let r=t.match(/^@\S+/g);if(r&&r.length>0){let s;if(!n){i&&a.fetchAgents(i);return}if(0===n.length)return;let o=(0,m.Q7)(e);if(o.length>0){let e=o[0];s=n.filter(t=>t.slug===e.name)}else s=n;let l=r[0],d=l.substring(1);if(s.find(e=>e.slug===d)){c(l),u(t.replace(l,""));return}}c(""),u("")},[n,i,a,e,t,s]),(0,r.jsx)(l.A,{id:"copilot-chat-textarea-preview","aria-hidden":!0,className:"textarea-preview",ref:s,role:"presentation",sx:{bg:"canvas.default",borderRadius:"var(--borderRadius-medium) var(--borderRadius-medium) 0 0",height:"inherit",lineHeight:"20px",overflowY:"hidden",padding:"8px 12px 2px",position:"absolute",inset:0,whiteSpace:"pre-wrap",zIndex:0,"> .chat-token":{backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",borderRadius:"var(--borderRadius-small)",color:"var(--fgColor-accent, var(--color-accent-fg))"}},children:o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"chat-token",children:o}),d]}):t})}function $({isLoading:e,onSubmit:t}){return(0,r.jsx)(S.K,{variant:"invisible",size:"small",onClick:t,icon:a.PaperAirplaneIcon,"aria-label":"Send now",disabled:e,tooltipDirection:"n"})}function M({onSubmit:e}){return(0,r.jsx)(S.K,{variant:"invisible",size:"small",unsafeDisableTooltip:!0,onClick:e,icon:a.SquareFillIcon,"aria-label":"Stop response",tooltipDirection:"w"})}try{D.displayName||(D.displayName="ChatInput")}catch{}try{P.displayName||(P.displayName="TextareaPreview")}catch{}try{$.displayName||($.displayName="SubmitButton")}catch{}try{M.displayName||(M.displayName="StopButton")}catch{}var G=s(7572),F=s(30569),_=s(22868),B=s(72574),H=s(92979),K=s(89169),U=s(16823),O=s(65481),q=s(20053),V=s(449),Q=s(72431),Y=s(695),J=s(3167),Z=s(85139),X=s(84252),ee=s(23398),et=s(30631);let es=({panelWidth:e,suggestionKind:t})=>{let s=(0,b.Pk)(),n=(0,y.b)(),o=(0,h.useCallback)(e=>{n.sendChatMessage(n.getSelectedThread(s),e.question,s.currentReferences,s.currentTopic,s.context),(0,i.BI)("copilot_generated_suggestion_click",{skill:e.skill,contextType:s.context?.[0]?.type,content:"initial"===t?e.question:null})},[n,s,t]),l=(0,h.memo)(function({suggestion:t}){return(0,r.jsxs)(U.l.Item,{onSelect:()=>o(t),sx:{mx:0,border:"1px solid",borderColor:"border.default",width:"fit-content"},children:[(0,r.jsx)(U.l.LeadingVisual,{children:(0,r.jsx)(x.A,{icon:a.PaperAirplaneIcon})}),(0,r.jsx)(et.A,{maxWidth:e?e-80:f.J.DEFAULT_PANEL_WIDTH,title:t.question,children:(0,r.jsx)("span",{children:t.question})})]})}),c="loading"===s.messagesLoading.state||!!s.streamingMessage,{suggestions:d}=s,u=!!(!c&&!s.showTopicPicker&&0===s.currentReferences.length);return g.W.staticThreadSuggestions&&u&&d&&d.suggestions?(0,r.jsxs)(U.l,{className:"copilot-suggestions",sx:{pt:0,pb:"initial"===t?3:0,display:"flex",gap:2,flexDirection:"column"},children:[void 0!==t&&(0,r.jsx)(U.l.Heading,{as:"h2",sx:{fontSize:0,mx:0,color:"fg.muted",fontWeight:600},children:function(e){return e?`Ask about the ${e.replace(/-/g," ")}:`:"Ask anything:"}(d.referenceType)}),d?.suggestions.map(e=>r.jsx(l,{suggestion:e},e.question))]}):null},en=(0,h.memo)(es);try{es.displayName||(es.displayName="CopilotSuggestions")}catch{}try{(n=CopilotSuggestion).displayName||(n.displayName="CopilotSuggestion")}catch{}var er=s(35978),ei=s(21176),ea=s(4462),eo=s(85414),el=s(98264);let ec=({children:e})=>{let t=`
    @keyframes dot1 {
      0%, 75% { opacity: 1; }
      100% { opacity: 0; }
    }
    @keyframes dot2 {
      0% { opacity: 0; }
      15% { opacity: 0; }
      25%, 75% { opacity: 1; }
      100% { opacity: 0; }
    }
    @keyframes dot3 {
      0% { opacity: 0; }
      40% { opacity: 0; }
      50%, 75% { opacity: 1; }
      100% { opacity: 0; }
    }
  `;return(0,r.jsxs)(r.Fragment,{children:[e,(0,r.jsx)("style",{children:t}),[1,2,3].map(e=>(0,r.jsx)(p.A,{sx:{opacity:0,animation:"2s infinite",animationName:`dot${e}`},children:"."},`dot${e}`))]})};try{ec.displayName||(ec.displayName="WithAnimatedEllipsis")}catch{}let ed={"agent-mention":{regex:/^@\S+/g,renderer:e=>(0,r.jsx)(eo.$,{mention:e})}},eu=({isLatestMessage:e,isStreaming:t,panelWidth:s,...n})=>{let i=(0,b.Pk)(),a=(0,y.b)(),{message:c}=(0,Y.V)(),d=(0,m.Th)(c,i.currentUserLogin),u="Copilot"===d.name,f="user"===d.type,j=u||(0,m.yh)(d),v=u&&c.agentErrors?.length,w=!v&&!!u&&!!c.error&&c.error.isError,A=new Date(Date.parse(c.createdAt||"")),k=n.isLoading||t,S=u&&!n.excludeFeedback&&!k,C=(0,h.useRef)([]),I=(0,h.useRef)(null),N=function(){let{currentTopic:e}=(0,b.Pk)(),t=(0,h.useSyncExternalStore)(()=>()=>{},()=>location.origin,()=>"");if(!(0,m.P)(e))return"";let{name:s,id:n}=e;return`

---

Generated by Copilot using the [${s}](${t}/copilot/d/${n}) knowledge base`}(),T=(0,h.useRef)(!1),R=(0,h.useRef)(null),z=c.interrupted,W=c.clientConfirmations&&c.clientConfirmations.length>0,E=g.W.copilotImmersiveV1&&"immersive"===i.mode,[L,D]=(0,h.useState)([]),[P,$]=(0,h.useState)(void 0),[M,et]=(0,h.useState)([]),es=!w&&(S||u&&!!c.content&&!t&&g.W.copyMessage)&&!c.confirmations,eo=(0,h.useCallback)(async()=>i.agentsPath?await a.fetchAgents(i.agentsPath):[],[a,i.agentsPath]),{content:eu,reactReplaceMatches:ep}=(0,h.useMemo)(()=>{if(g.W.reactMarkdown){let{output:e,matches:t}=(0,el.s0)(ed,c.id,c.content);return{content:e,reactReplaceMatches:t}}return{content:c.content,reactReplaceMatches:[]}},[c.content,c.id]),{html:eh,hasCitations:ef,referenceMap:eb}=(0,h.useMemo)(()=>u&&"ask-docs"===c.intent?(0,V.oo)(eu,{references:c.references,isAssistive:"assistive"===i.mode,agents:i.agents,fetchAgents:eo}):g.W.vulnerabilityAnnotations?{html:(0,V.IA)(eu,{references:c.references,annotations:c.copilotAnnotations,isAssistive:"assistive"===i.mode,agents:i.agents,fetchAgents:eo}),hasCitations:!1,referenceMap:null}:{html:(0,V.Kc)(eu,{references:c.references,extensions:[],isAssistive:"assistive"===i.mode,agents:i.agents,fetchAgents:eo}),hasCitations:!1,referenceMap:null},[u,c.intent,eu,c.references,c.copilotAnnotations,i.mode,i.agents,eo]),ey=!!(u&&n.isLoading||eh||c.references?.length||c.confirmations?.length||c.skillExecutions?.length||w||v);(0,o.G)({containerRef:I,bindKeys:128,focusableElementFilter:e=>(T.current||C.current.includes(e)||e.classList.contains("reference-action")||C.current.push(e),!0),getNextFocusable:(e,t)=>{let s=C.current.indexOf(t);if("next"===e){if(s+2>C.current.length)return n.setParentFocusZoneEnabled?.(!0),t?.setAttribute("tabindex","-1"),C.current[0]?.setAttribute("tabindex","0"),n.inputRef?.current||void 0;if(n.setParentFocusZoneEnabled?.(!1),-1!==s)return C.current[s+1]}if("previous"===e&&(1===s&&n.setParentFocusZoneEnabled?.(!0),s>0))return C.current[s-1]}},[]),(0,h.useEffect)(()=>{e&&t&&(0,G.i)("Copilot is responding")},[e,t]),(0,h.useEffect)(()=>{e&&!t&&I.current&&(0,G.C)(I.current)},[e,t]),(0,h.useEffect)(()=>{if(!g.W.newReferencesUI)return;let e=(c.skillExecutions??[]).find(e=>!L.some(t=>t.slug===e.slug));e&&(D([...L,e]),$(e))},[c.skillExecutions,L]),(0,h.useEffect)(()=>{if(!g.W.newReferencesUI)return;let e=(c.skillExecutions??[]).filter(e=>"completed"===e.status&&e.references&&e.references.length>0&&!M.some(t=>e.slug===t.slug));e.length>0&&et([...M,...e])},[M,c.skillExecutions]);let ej=(0,h.useCallback)(()=>{C.current=C.current.filter(e=>!e.classList.contains("feedback-action")),T.current=!0},[]),ev=(0,h.useCallback)(async(e,t)=>{await a.sendChatMessage(a.getSelectedThread(i),`@${d.name} ${eg(e.state)} Confirmation: ${t}`,c.references??[],i.currentTopic,i.context,e)},[a,i,d.name,c.references]),ew=(0,h.useCallback)(e=>{let t=e.target.href,s=c.references?.find(e=>e.url===t);s&&"immersive"===i.mode&&(a.selectReference(s),e.preventDefault())},[a,c.references,i.mode]),eA=(0,h.useCallback)(e=>{let t=e.target;if(t.open&&R.current){let e=t.querySelectorAll(".reference-action"),s=C.current.indexOf(R.current);s>=0&&(C.current=[...C.current.slice(0,s+1),...e,...C.current.slice(s+1)])}else C.current=C.current.filter(e=>!e.classList.contains("reference-action"))},[]),ek="immersive"===i.mode?"var(--bgColor-default, var(--color-canvas-default))":"var(--overlay-bgColor, var(--color-canvas-overlay, #161b22))";return(0,r.jsxs)(l.A,{className:"message-container",tabIndex:0,ref:I,sx:{p:3,borderBottom:"assistive"!==i.mode||e?"none":"1px solid var(--borderColor-muted, var(--color-border-muted))",fontSize:1,borderRadius:E&&!j?2:0,marginTop:E?3:0,backgroundColor:E&&!j?"var(--bgColor-inset)":"",width:E&&!j?"66%":"100%",alignSelf:E&&!j?"end":"",position:E?"relative":"static","&:hover, &:focus-within":{".message-actions":{opacity:1,pointerEvents:"auto"}},"&:hover":{".message-actions":{transition:"opacity 0.1s ease-in-out",transitionDelay:"0.2s"}}},children:[!E||j?(0,r.jsxs)(l.A,{as:E?"div":"h2",sx:{width:"100%",display:"flex",alignItems:"center",gap:2,fontSize:1,marginBottom:g.W.newReferencesUI&&c.references&&!k?1:2},children:[u?(0,r.jsx)(ee.A,{isLoading:k,isError:w&&c.error?.type!=="agentUnauthorized",mode:i.mode}):(!E||j)&&(0,r.jsx)(l.A,{sx:{width:24,height:24,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(_.r,{src:d.avatarURL,size:24})}),(0,r.jsx)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexGrow:1},children:(0,r.jsxs)(l.A,{sx:{display:"flex",gap:2,alignItems:"baseline"},children:[E?null:(0,r.jsx)(p.A,{"data-testid":"chat-message-author-name",sx:{fontWeight:"bold"},children:d.name}),W&&(0,r.jsxs)(p.A,{sx:{fontWeight:"normal"},children:[c.clientConfirmations?.[0]?.state," the action"]}),!E&&(0,r.jsx)(p.A,{sx:{fontSize:0,fontWeight:400,color:"fg.subtle"},children:u&&k?g.W.newReferencesUI?(0,r.jsx)(ec,{children:(0,ea.WA)(P)}):"Responding...":(0,r.jsx)(K.A,{date:A,format:"relative"})})]})})]}):null,g.W.newReferencesUI&&u&&k&&M.length>0&&(0,r.jsx)(U.l,{children:M.map((e,t)=>{let s=(0,ea.gB)(e);if(s)return(0,r.jsxs)(U.l.Item,{sx:{fontSize:1},children:[(0,r.jsx)(U.l.LeadingVisual,{children:(0,r.jsx)(x.A,{icon:s.icon})}),s.loadingText]},t)})}),ey&&(0,r.jsxs)("div",{className:(0,q.$)(Q.A.message),children:[(0,r.jsxs)(l.A,{className:"js-snippet-clipboard-copy-unpositioned",sx:{".snippet-clipboard-content":{position:"relative",overflow:"auto",display:"flex",justifyContent:"space-between",backgroundColor:"canvas.subtle",marginBottom:3,pre:{marginBottom:0},zIndex:1,"clipboard-copy":{width:"28px",height:"28px"}}},children:[!g.W.newReferencesUI&&u&&c.skillExecutions?.map((e,t)=>r.jsx(ei.C,{functionCall:e,manager:a,panelWidth:s},t)),g.W.newReferencesUI&&(f||"assistant"===c.role)&&(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(J.n,{references:c.references??[],referenceMap:eb,showReferenceNumbers:ef,onToggle:eA,summaryRef:R})}),u&&n.isLoading?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(H.O,{variant:"rounded",height:"12px",width:"random"}),(0,r.jsx)(H.O,{variant:"rounded",height:"12px",width:"random"}),(0,r.jsx)(H.O,{variant:"rounded",height:"12px",width:"random"})]}):g.W.reactMarkdown&&!W?(0,r.jsx)(el.aF,{onLinkClick:ew,body:eh,matches:ep,reactReplaceBlocks:ed}):!W&&(0,r.jsx)(B.G,{onLinkClick:ew,verifiedHTML:eh}),!g.W.newReferencesUI&&(f||"assistant"===c.role)&&(0,r.jsx)(J.n,{references:c.references??[],referenceMap:eb,showReferenceNumbers:ef,onToggle:eA,summaryRef:R}),w?(0,r.jsx)(ex,{manager:a}):null,c.agentErrors?.length?(0,r.jsx)(em,{errors:c.agentErrors}):null,z?(0,r.jsx)(O.A,{"data-testid":"chat-message-interrupted",sx:{fontSize:1,px:2,py:1,zIndex:-1},children:"Copilot was interrupted before it could finish this message."}):null,(u||(0,m.yh)(d))&&(0,m.Ye)(c.confirmations).map((t,s)=>"indexrepo"===t.confirmation.name?(0,r.jsx)(Z.R,{confirmation:t},s):(0,r.jsx)(X.m,{confirmation:t,handleConfirmation:ev,isLatestMessage:e},s))]}),e&&es&&g.W.followUpThreadSuggestions&&(0,r.jsx)(en,{panelWidth:s}),es&&(0,r.jsxs)(l.A,{className:"message-actions",sx:{display:"inline-flex",alignItems:"center",position:e?void 0:"absolute",bottom:e?void 0:"-2.25rem",backgroundColor:ek,borderRadius:e?void 0:2,boxShadow:e?void 0:"var(--shadow-floating-small)",opacity:e?void 0:0,pointerEvents:e?void 0:"none","&::before":{content:e?void 0:'""',inset:"-0.5rem -0.75rem",zIndex:-1,position:"absolute"}},children:[S&&(0,r.jsx)(er.G,{returnFocusRef:I,setParentFocusZoneEnabled:n.setParentFocusZoneEnabled,onFeedbackSubmitted:ej}),u&&!!c.content&&!t&&g.W.copyMessage&&(0,r.jsx)(F.T,{textToCopy:(c.content??"")+N,ariaLabel:"Copy to clipboard",size:"small",className:"d-flex flex-items-center"})]})]})]})},ep=({message:e,...t})=>(0,r.jsx)(Y.$,{message:e,children:(0,r.jsx)(eu,{...t})});function ex({manager:e}){let{message:t}=(0,Y.V)(),{error:s}=t;if(!s)return null;switch(s.type){case"agentUnauthorized":return(0,r.jsx)(eh,{error:s,manager:e});case"agentRequest":return(0,r.jsx)(em,{errors:[s.details]});default:return(0,r.jsx)(O.A,{variant:"warning",sx:{fontSize:1,px:2,py:1,zIndex:-1},children:s.message||"Something went wrong"})}}function eh({error:e,manager:t}){let{details:s}=e,[n,i]=(0,h.useState)(!1),o=(0,h.useCallback)(()=>{i(!0),t.dispatch({type:"MESSAGE_ADDED",message:(0,m.Y6)({role:"user",content:`Dismissed the connection with ${s.name}.`})}),t.dispatch({type:"MESSAGE_ADDED",message:(0,m.Y6)({role:"assistant",content:`I was unable to connect you to ${s.name} because you cancelled the authentication.`})})},[s.name,t]);return(0,r.jsxs)("div",{className:"position-relative d-flex flex-column flex-items-center gap-3 border rounded-2 p-5",children:[!n&&(0,r.jsx)(S.K,{"aria-label":"Close",className:"position-absolute top-0 right-0 mt-2 mr-2",icon:a.XIcon,onClick:o,variant:"invisible",unsafeDisableTooltip:!0}),(0,r.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[(0,r.jsx)(a.MarkGithubIcon,{size:48,className:"border circle borderColor-muted"}),(0,r.jsx)(a.LinkIcon,{className:"fgColor-muted"}),(0,r.jsx)("img",{className:(0,q.$)("avatar",Q.A.agentUnauthorizedAvatar,"border circle borderColor-muted"),src:s.avatar_url,alt:`icon for ${s.name}`})]}),(0,r.jsxs)("p",{className:"h4 m-0 text-center",children:["Connect with ",s.name]}),(0,r.jsxs)("p",{className:"fgColor-muted text-center",children:["To use the ",s.name," extension, you\u2019ll need to connect your GitHub account to your ",s.name," account."]}),!n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Q,{as:"a",variant:"primary",size:"large",className:"width-full",href:s.authorize_url,rel:"noopener",target:"_blank",children:"Connect"}),(0,r.jsxs)("p",{className:"fgColor-muted text-center f6 m-0",children:["Click connect to be redirected to ",s.authorize_url]})]})]})}function em({errors:e}){return(0,r.jsx)("div",{className:"d-flex flex-column gap-2",children:e.map((e,t)=>(0,r.jsxs)("div",{className:"p-3 border rounded-2",children:[(0,r.jsxs)("div",{className:"text-bold",children:[(0,r.jsx)(a.AlertFillIcon,{className:"mr-1 fgColor-attention"})," ","http"===e.type?`${e.code} ${e.identifier}`:`${eg(e.type)} error`]}),(0,r.jsx)("div",{children:e.message})]},t))})}function eg(e){return e.charAt(0).toUpperCase()+e.slice(1)}try{eu.displayName||(eu.displayName="InnerChatMessage")}catch{}try{ep.displayName||(ep.displayName="ChatMessage")}catch{}try{ex.displayName||(ex.displayName="ErrorMessage")}catch{}try{eh.displayName||(eh.displayName="AgentUnauthorizedError")}catch{}try{em.displayName||(em.displayName="AgentErrors")}catch{}var ef=s(85349),eb=s(34614),ey=s(60717),ej=s(94977),ev=s(33333);let ew=new Set(["repository","magic-knowledge-base"]),eA=()=>{let{currentReferences:e,mode:t,renderKnowledgeBaseAttachedToChatPopover:s}=(0,b.Pk)(),n=e.filter(e=>!ew.has(e.type)),i=(0,y.b)(),o=(0,h.useCallback)(e=>i.removeReference(e),[i]),[c,g]=(0,h.useState)(!1),f=n[0],[v,w]=(0,h.useState)(f?.type==="docset"?f:void 0);return((0,h.useEffect)(()=>{f?.type==="docset"&&w(f)},[f]),(0,h.useEffect)(()=>{(async()=>{if(v){let e=await i.fetchKnowledgeBases();e.ok&&!e.payload.find(e=>e.id===v.id)&&(w(void 0),o(0))}})()},[]),(0,h.useEffect)(()=>{(async()=>{if(v&&void 0===v.repos){let e=await i.fetchKnowledgeBases();if(e.ok){let t=e.payload.find(e=>e.id===v.id);t&&w({type:"docset",...t})}}})()},[v,i,i.service,o]),0===n.length)?null:(0,r.jsxs)(l.A,{sx:{mt:"auto",position:"relative"},children:[(0,r.jsx)(A.A,{open:v&&s,sx:{bottom:"75px",left:"50%",transform:"translateX(-50%)"},caret:"bottom",children:(0,r.jsxs)(A.A.Content,{sx:{mt:2,width:"300px"},className:"color-shadow-medium",children:[(0,r.jsx)(u.A,{as:"h4",sx:{fontSize:2,mb:2},children:"Copilot will now use content within the knowledge base to answer your questions"}),(0,r.jsx)("p",{children:"Remove the knowledge base to switch back to your original context."}),(0,r.jsx)(d.Q,{onClick:()=>{i.dismissKnowledgeBaseAttachedToChatPopover()},children:"Got it"})]})}),(0,r.jsxs)(l.A,{sx:{border:"1px solid",borderColor:"border.default",borderRadius:2,display:"flex",gap:2,p:2,pl:3,mx:"assistive"===t?3:0,mb:3},children:[(0,r.jsx)(x.A,{icon:v?a.BookIcon:a.PaperclipIcon,sx:{color:"fg.muted"}}),(0,r.jsxs)(l.A,{sx:{flex:1,display:"flex",flexDirection:"column",gap:v?1:2},children:[(0,r.jsx)(p.A,{sx:{fontWeight:"bold",fontSize:0,display:"block",lineHeight:1.25},children:v?`Chatting with ${(0,m.z$)(v)}`:`Chatting with ${n.length} attachment${n.length>1?"s":""}`}),v?(0,r.jsx)(l.A,{sx:{fontSize:0,lineHeight:1.25},...(0,j.G)("docset-reference"),children:v.repos?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.A,{sx:{color:"fg.muted"},children:"Knowledge base with"})," ",(0,r.jsx)(ef.T,{open:c,onOpen:()=>g(!0),onClose:()=>g(!1),renderAnchor:e=>(0,r.jsx)(eb.A,{...e,as:"button",sx:{color:"fg.default",fontWeight:"bold"},children:`${v.repos?.length} ${v.repos?.length===1?"repository":"repositories"}`}),side:"outside-top",overlayProps:{portalContainerName:ev.E5},children:(0,r.jsxs)(l.A,{sx:{display:"flex",flexDirection:"column",minWidth:"320px",maxWidth:"100vw",maxHeight:"100vw",overflow:"auto"},children:[(0,r.jsxs)(l.A,{sx:{display:"flex",py:2,pr:2,alignItems:"center",borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))"},children:[(0,r.jsx)(p.A,{sx:{pl:3,flex:1,fontWeight:"bold"},children:v.name}),(0,r.jsx)(S.K,{unsafeDisableTooltip:!0,icon:a.XIcon,onClick:()=>g(!1),"aria-label":"Close docset overlay",variant:"invisible"})]}),(0,r.jsxs)(l.A,{sx:{display:"flex",flex:1,flexDirection:"column",px:3,pt:2,pb:3,gap:2},children:[(0,r.jsx)("div",{children:v.description}),(0,r.jsx)(l.A,{sx:{color:"fg.muted"},children:"Repository content in the knowledge base"}),v.repos&&v.repos.map(e=>(0,r.jsxs)(l.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(x.A,{icon:a.RepoIcon,sx:{color:"fg.muted"}}),(0,r.jsx)(p.A,{sx:{pl:2},children:e})]},e))]})]})})]}):(0,r.jsx)(p.A,{sx:{color:"fg.muted"},children:"Loading repositories..."})}):(0,r.jsx)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:n.length>0&&n.map((e,t)=>(0,r.jsx)(ey.A,{text:(0,m.z$)(e),onRemove:()=>o(t)},(0,m.z$)(e)))})]}),v&&(0,r.jsx)(ej.A,{"aria-label":"Remove knowledge reference",direction:"nw",children:(0,r.jsx)(S.K,{unsafeDisableTooltip:!0,icon:a.XIcon,"aria-label":"Remove knowledge reference",size:"small",variant:"invisible",onClick:()=>{o(0),w(void 0)}})})]})]})};try{ew.displayName||(ew.displayName="INVISIBLE_REFERENCES")}catch{}try{eA.displayName||(eA.displayName="CurrentChatReferences")}catch{}var ek=s(97564),eS=s(33067),eC=s(19002);function eI({docset:e,size:t}){return(0,r.jsx)(_.r,{src:e.avatarUrl,square:"organization"===e.ownerType,size:t})}try{eI.displayName||(eI.displayName="KnowledgeBaseAvatar")}catch{}var eN=s(16372);function eT({currentTopic:e,indexingState:t,okToIndex:s,triggerIndexing:n}){let[i,o]=(0,h.useState)(!1),[c,u]=(0,h.useState)(!1),[p,x]=(0,h.useState)(!1),g=(0,h.useCallback)(()=>{x(!0),o(!0),n(),(0,G.i)("Indexing requested.")},[n]),f=(0,m.P)(e),b=f?"knowledge base":"repository",y=f?t.docs:t.code;return y===eS.W5.Indexed?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{sx:{px:3,pb:3},children:(0,r.jsx)(eE,{})}),p&&(0,r.jsxs)(l.A,{sx:{borderTop:"1px solid",py:2,borderColor:"border.muted",textAlign:"center"},children:["You indexed this repository.",void 0!==t.remainingRepoIndexTokens&&(0,r.jsx)("span",{className:"color-fg-muted",children:` ${t.remainingRepoIndexTokens} repositories remaining.`})]})]}):(0,r.jsx)(l.A,{className:"indexed-state-container",sx:{display:"flex",flexDirection:"column",alignItems:"center",m:3,mt:0,p:3,gap:3,border:"1px solid",borderColor:"border.default",borderRadius:"6px",textAlign:c?void 0:"center"},children:c?(0,r.jsxs)("div",{className:"d-flex",children:[(0,r.jsx)(S.K,{icon:a.ArrowLeftIcon,onClick:()=>u(!1),"aria-label":"Go back.",variant:"invisible",className:"mr-2",sx:{height:"16px",marginTop:"2px"}}),(0,r.jsxs)("p",{className:"m-0",children:["Under your plan, limited repositories can be concurrently indexed for natural language search."," ",(0,r.jsx)(eb.A,{inline:!0,href:"https://docs.github.com/en/copilot/managing-copilot/managing-github-copilot-in-your-organization/customizing-copilot-for-your-organization/indexing-repositories-for-copilot-chat#about-indexing-repositories",target:"_blank",rel:"noopener noreferrer",children:"Learn more"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eR,{indexedState:y,canIndexStatus:t.requestStatus,topicType:b,remainingRepoIndexTokens:"repository"===b?t.remainingRepoIndexTokens:void 0}),(0,r.jsxs)("div",{className:"d-flex",children:[s&&(0,r.jsxs)(d.Q,{variant:"primary",onClick:g,disabled:i,className:"mr-2",children:["Index ",e.name]}),t.code!==eS.W5.Unknown&&(0,r.jsx)(d.Q,{onClick:()=>u(!0),children:"Learn more"})]})]})})}function eR({indexedState:e,canIndexStatus:t,topicType:s,remainingRepoIndexTokens:n}){switch(e){case eS.W5.Indexing:return(0,r.jsx)(eW,{topicType:s,remainingRepoIndexTokens:n});case eS.W5.Indexed:return(0,r.jsx)(eE,{});case eS.W5.Unindexed:return(0,r.jsx)(ez,{canIndexStatus:t,topicType:s,remainingRepoIndexTokens:n});default:return(0,r.jsx)(eL,{topicType:s})}}function ez({canIndexStatus:e,topicType:t,remainingRepoIndexTokens:s}){switch(e){case eS.xG.Requested:return(0,r.jsx)(eW,{topicType:t,remainingRepoIndexTokens:s});case eS.xG.RequestFailed:return(0,r.jsxs)(l.A,{sx:{display:"flex",gap:2,alignItems:"center"},children:[(0,r.jsx)(x.A,{icon:a.AlertIcon,size:16,sx:{color:"fg.muted"}}),(0,r.jsx)("div",{children:(0,r.jsx)(p.A,{sx:{ml:2},"aria-live":"polite",children:"Unable to queue for semantic indexing right now \u2014 try again later."})})]});default:return(0,r.jsxs)("div",{className:"d-flex flex-direction-v flex-column",children:[e===eS.xG.CanIndex?(0,r.jsx)("span",{children:`Unlock natural language search and improve Copilot's understanding by indexing this ${t}.`}):(0,r.jsxs)("span",{children:["This ",t," is not currently indexed."]}),void 0!==s&&e!==eS.xG.Forbidden&&(0,r.jsx)("span",{className:"color-fg-muted",children:`${s} repositories remaining.`})]})}}function eW({topicType:e,remainingRepoIndexTokens:t}){return(0,r.jsxs)(l.A,{sx:{display:"flex",gap:1,flexDirection:"column",alignItems:"center"},children:[(0,r.jsxs)("span",{"aria-live":"polite",children:["Copilot is indexing this ",e,"."]}),void 0!==t&&(0,r.jsx)("span",{className:"color-fg-muted",children:`${t} repositories remaining.`}),(0,r.jsxs)("div",{className:"d-flex",children:[(0,r.jsx)(c.A,{size:"small",sx:{color:"fg.muted"}}),(0,r.jsx)("span",{className:"ml-2",children:"This may take a few minutes."})]})]})}function eE(){return(0,r.jsxs)(l.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(x.A,{icon:a.DotFillIcon,size:16,sx:{color:"success.fg"}}),(0,r.jsx)(l.A,{sx:{color:"fg.muted",fontSize:0,ml:1},children:"Indexed for improved understanding and accuracy."})]})}function eL({topicType:e}){return(0,r.jsxs)(l.A,{sx:{display:"flex",gap:3,alignItems:"center"},children:[(0,r.jsx)(c.A,{size:"small",sx:{color:"fg.muted",flexShrink:0}}),(0,r.jsxs)("span",{children:["Checking for semantic ","repository"===e?"code":""," search availability\u2026"]})]})}try{eT.displayName||(eT.displayName="TopicIndexState")}catch{}try{eR.displayName||(eR.displayName="IndexedStateInfo")}catch{}try{ez.displayName||(ez.displayName="NotIndexedState")}catch{}try{eW.displayName||(eW.displayName="IndexingInProgressState")}catch{}try{eE.displayName||(eE.displayName="IndexedState")}catch{}try{eL.displayName||(eL.displayName="LoadingState")}catch{}function eD(){let{currentTopic:e,mode:t,messages:s}=(0,b.Pk)(),n=(0,m.P)(e),i=(0,m.Z6)(e),o="immersive"===t&&g.W.copilotImmersiveV1,c=e?.name,d=null;e&&i&&(c=d=`${e.ownerLogin}/${e.name}`);let u=n?e.repos:d?[d]:[],[h,f]=(0,eS.M8)(u),y=h.requestStatus===eS.xG.CanIndex&&(i&&h.code===eS.W5.Unindexed||n&&h.docs===eS.W5.Unindexed),j=(i&&h.code===eS.W5.Unindexed||n&&h.docs===eS.W5.Unindexed)&&h.requestStatus!==eS.xG.CanIndex,v=i||n,w=(0,r.jsx)("p",{children:"Explore and learn about programming-related concepts using natural language."}),A=(0,r.jsxs)(p.A,{as:"p",sx:{mb:0},children:["Copilot is powered by AI, so mistakes are possible. Review output carefully before use."," ",(0,r.jsx)(eb.A,{inline:!0,href:"https://docs.github.com/en/copilot/github-copilot-enterprise/copilot-chat-in-github/about-github-copilot-chat",target:"_blank",rel:"noopener noreferrer",children:"Learn more about GitHub Copilot Chat."})]}),k=e?n?(0,r.jsxs)("span",{children:[e.description&&(0,r.jsx)("p",{children:e.description}),(0,r.jsxs)("p",{children:["Knowledge bases allow you to chat with Copilot about docs content from multiple repositories using natural language questions like ",(0,r.jsx)("i",{children:'"How do I get started with ___?"'})," or"," ",(0,r.jsx)("i",{children:'"Explain concept ___"'}),"."]}),!o&&A]}):(0,r.jsxs)(r.Fragment,{children:[!g.W.staticThreadSuggestions&&(0,r.jsxs)("p",{children:["You can ask questions like ",(0,r.jsx)("i",{children:'"What does this file do?"'})," or"," ",(0,r.jsx)("i",{children:'"Where is this functionality defined?"'})]}),(0,r.jsx)(p.A,{sx:{mb:0},children:A})]}):(0,r.jsxs)("span",{children:[!o&&w,!o&&A]});return(0,r.jsxs)(l.A,{sx:{display:"flex",flexDirection:"column",alignItems:"start",gap:2,color:o?"fg.muted":"fg.default",borderBottom:o?"1px solid var(--borderColor-muted, var(--color-border-muted))":"1px solid var(--borderColor-default, var(--color-border-default))",marginBottom:o?3:0,paddingBottom:o?3:0},children:["immersive"===t&&0===s.length&&(0,r.jsx)(eC.A,{}),(0,r.jsxs)(l.A,{sx:{display:"flex",flexDirection:"column",width:"100%"},children:[(0,r.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",p:3,pb:0,gap:2},children:[e&&(0,r.jsx)(l.A,{sx:{flexShrink:0},children:n?(0,r.jsx)(eI,{docset:e,size:32}):(0,r.jsx)(eN.W,{ownerLogin:e.ownerLogin,ownerType:e.ownerType,size:32})}),(0,r.jsxs)("div",{children:[!o&&(0,r.jsx)(l.A,{sx:{display:"flex",gap:2},children:(0,r.jsx)(p.A,{as:"h1",sx:{fontSize:2,lineHeight:1.25,wordBreak:"break-word"},children:e?`Chatting about ${c}`:"Chatting about code and programming"})}),(0,r.jsx)(p.A,{sx:{fontSize:0,color:"fg.muted"},children:e&&(n?(0,r.jsxs)("span",{children:[e?.visibleOutsideOrg?"Public":"Private"," knowledge base"]}):(0,r.jsxs)("span",{children:[(0,r.jsx)(p.A,{sx:{textTransform:"capitalize"},children:e?.visibility})," repository"]}))})]})]}),(0,r.jsx)(l.A,{sx:{p:3},children:k}),n&&(0,r.jsxs)(l.A,{sx:{p:3,pt:0},children:[(0,r.jsx)(l.A,{sx:{color:"fg.muted",fontWeight:600,fontSize:0},children:"Repositories included in this knowledge base"}),e.repos.map(e=>(0,r.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",pt:2,pb:2,gap:2},children:[(0,r.jsx)(x.A,{icon:a.RepoIcon,sx:{color:"fg.muted"}}),(0,r.jsx)(eb.A,{href:`/${e}`,sx:{color:"fg.default"},children:e})]},e))]}),v&&(0,r.jsx)(eT,{currentTopic:e,indexingState:h,okToIndex:y,triggerIndexing:f}),j&&(0,r.jsx)(eP,{canIndexStatus:h.requestStatus,currentTopic:e,hitIndividualLimit:void 0!==h.remainingRepoIndexTokens&&h.remainingRepoIndexTokens<=0})]})]})}function eP({canIndexStatus:e,currentTopic:t,hitIndividualLimit:s}){let n;switch(e){case eS.xG.Unauthorized:n=(0,r.jsx)("span",{children:"Ask an organization owner to have this repository indexed for semantic code search."});break;case eS.xG.Unknown:return null;case eS.xG.Forbidden:n=(0,r.jsx)("span",{children:"You can only index repositories that your organization owns."});break;case eS.xG.QuotaExhausted:n=s?(0,r.jsx)("span",{children:"You have reached your semantic search token limit. Please wait for more tokens to be granted."}):(0,r.jsxs)("span",{children:["Your organization has reached its limit for semantic search indexing. Contact your GitHub representative to increase your limit.",(0,ek.G7)("COPILOT_SEMANTIC_CODE_SEARCH_SETTINGS")&&(0,r.jsxs)(r.Fragment,{children:[" ","Organization administrators can"," ",(0,r.jsx)(eb.A,{inline:!0,href:`/organizations/${t.ownerLogin}/settings/copilot/semantic_code_search`,children:"manage indexed repositories"}),"."]})]});break;case eS.xG.ServiceUnavailable:n=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.A,{sx:{fontWeight:600},children:"Indexing temporarily unavailable due to heavy load."}),(0,r.jsx)("span",{children:"Please check back later."})]});break;default:return null}return(0,r.jsx)(l.A,{sx:{p:3,display:"flex",alignItems:"center",gap:2,bg:"canvas.subtle",borderRadius:"0 0 6px 6px",borderTop:"1px solid var(--borderColor-default, var(--color-border-default))"},children:n})}try{eD.displayName||(eD.displayName="TopicIndexedMessage")}catch{}try{eP.displayName||(eP.displayName="CannotIndexReason")}catch{}var e$=s(87726),eM=s(24128);function eG({mode:e}){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{sx:{height:"3rem",mb:2,display:"flex",justifyContent:"center"},children:(0,r.jsx)(eM.A,{})}),(0,r.jsx)(u.A,{as:"h1",sx:{textAlign:"center",fontSize:3,mb:2},children:"Ask Copilot"}),(0,r.jsx)(p.A,{as:"p",sx:{textAlign:"center",color:"fg.muted",mb:"immersive"===e?5:3,px:3,textWrap:"balance"},children:"Select a repository to get started. Ask questions about your codebase to get answers fast and learn your way around."})]})}try{eG.displayName||(eG.displayName="ChatWithCopilotHeader")}catch{}var eF=s(70170),e_=s(73766),eB=s(38936),eH=s(56226),eK=s(67749),eU=s(18312);function eO(){let e=(0,y.b)(),{currentRepository:t,mode:s,selectedThreadID:n}=(0,b.Pk)(),[i,o]=(0,h.useState)(""),d=(0,eF.s)(e=>o(e),400,{start:!1}),[u,x]=(0,h.useState)(void 0),m=(0,h.useCallback)(()=>x(void 0),[]),g=(0,h.useCallback)(async(t,r,i)=>{if(m(),!t){e.showTopicPicker(!1),e.clearCurrentTopic(),e.clearCurrentReferences(),"immersive"===s&&window.history.pushState(null,"","/copilot"),n&&f.J.setSelectedTopic(n,null);return}r?(await e.fetchCurrentDocset(t),e.showTopicPicker(!1)):void 0!==i&&(await e.fetchCurrentRepo(Number(i)),e.showTopicPicker(!1))},[m,e,s,n]),{repositories:j,loading:v}=function(e,t,s,n,i,o){let{topRepositoriesCache:l}=(0,b.Pk)(),c=(0,y.b)(),[d,u]=(0,h.useState)([]),[p,x]=(0,h.useState)(!l),m=(0,h.useRef)(void 0),g=(0,eU.useRelayEnvironment)(),f=(0,eU.useFragment)(eB.Sy,s??null);if(f&&!l&&!e){let{topRepositories:e}=f,s=eq((e.edges||[]).flatMap(e=>e?.node?[(0,eU.readInlineData)(eB.R6,e.node)]:[]),t,i),{ownerLogin:l,name:d}=o??{};if(o&&!s.find(e=>e.key===`${l}/${d}`)){let e=o.name;s.splice(0,0,{key:e,actionItem:"workspace"===i?(0,r.jsxs)(U.l.LinkItem,{as:eH.N,to:`/copilot/r/${e}`,onClick:()=>t(e,!1,o.id),children:[(0,r.jsx)(U.l.LeadingVisual,{children:(0,r.jsx)(eN.W,{ownerLogin:o.ownerLogin,ownerType:o.ownerType,size:16})}),o.ownerLogin,"/",e,(0,r.jsx)(U.l.TrailingVisual,{children:(0,r.jsx)(a.ArrowRightIcon,{})})]},e):(0,r.jsxs)(U.l.Item,{onSelect:()=>t(e,!1,o.id),children:[(0,r.jsx)(U.l.LeadingVisual,{children:(0,r.jsx)(eN.W,{ownerLogin:o.ownerLogin,ownerType:o.ownerType,size:16})}),o.ownerLogin,"/",e,(0,r.jsx)(U.l.TrailingVisual,{children:(0,r.jsx)(a.ArrowRightIcon,{})})]},e)})}setTimeout(()=>c.setTopRepositoryTopics(s),10),x(!1),n(void 0)}let j=(0,h.useCallback)(async()=>{try{let e=await (0,eU.fetchQuery)(g,eB.m,{topRepositoriesFirst:4}).toPromise();n(e?.viewer)}catch{}finally{x(!1)}},[g,n]);return((0,h.useEffect)(()=>{j()},[j]),(0,h.useEffect)(()=>{let s=async e=>{x(!0);let s=((await new Promise((t,s)=>{(0,eU.fetchQuery)(g,eB.XD,{searchQuery:(0,e_.J)(e)}).subscribe({start:e=>{m.current?.unsubscribe(),m.current=e},next:e=>{t(e)},error:e=>{s(e)}})})).search.nodes||[]).flatMap(e=>e?[(0,eU.readInlineData)(eB.R6,e)]:[]);u(s.length?eq(s,t,i):[]),x(!1)};e?s(e):l&&u(l)},[e,i,t,g,l]),l&&!e)?{repositories:l,loading:!1}:{repositories:d,loading:p}}(i,g,u,x,s,t),w=(0,h.useMemo)(()=>v?"Loading repositories":0===j.length?"No repositories found":1===j.length?"1 repository found":`${j.length} repositories found`,[v,j.length]);return(0,r.jsxs)(l.A,{sx:{border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:2,display:"flex",flexDirection:"column",mb:3},children:[(0,r.jsx)(l.A,{sx:{p:3,pb:0},children:(0,r.jsx)(eK.A,{id:C.uN,leadingVisual:a.SearchIcon,name:"topic-search","aria-label":"Search repositories to chat about",placeholder:"Search repositories to chat about",onChange:e=>d(e.target.value),sx:{width:"100%","input:placeholder-shown":{textOverflow:"ellipsis"}}})}),(0,r.jsxs)(U.l,{children:[(0,r.jsx)("div",{role:"status",className:"sr-only",children:w}),v?(0,r.jsx)(l.A,{as:"li",sx:{display:"flex",justifyContent:"center",py:2,height:"190px",alignItems:"center"},children:(0,r.jsx)(c.A,{})}):0===j.length?(0,r.jsxs)(U.l.Item,{disabled:!0,children:[(0,r.jsx)(U.l.LeadingVisual,{sx:{color:"fg.muted"},children:(0,r.jsx)(a.CircleSlashIcon,{})}),(0,r.jsx)(p.A,{sx:{color:"fg.muted"},children:"No results found"})]}):(0,r.jsx)(r.Fragment,{children:j.length>0&&(0,r.jsxs)(U.l.Group,{children:[(0,r.jsx)(U.l.GroupHeading,{as:"h3",children:"Recent repositories"}),j.map(e=>e.actionItem)]})}),(0,r.jsx)(U.l.Divider,{}),(0,r.jsxs)(U.l.Item,{id:"chat-with-no-context",onSelect:()=>g(void 0),sx:{"#chat-with-no-context--label":{marginBottom:"0px !important"}},children:["General purpose chat",(0,r.jsx)(U.l.TrailingVisual,{children:(0,r.jsx)(a.ArrowRightIcon,{})})]},"chat-with-no-context")]})]})}function eq(e,t,s){return e.map(({owner:{login:e,avatarUrl:n},isInOrganization:i,name:o,databaseId:l})=>{let c=`${e}/${o}`;return{key:c,actionItem:"workspace"===s?(0,r.jsxs)(U.l.LinkItem,{as:eH.N,to:`/copilot/r/${c}`,onClick:()=>t(c,!1,l??0),children:[(0,r.jsx)(U.l.LeadingVisual,{children:(0,r.jsx)(_.r,{src:n,square:i,size:16})}),e,"/",o,(0,r.jsx)(U.l.TrailingVisual,{children:(0,r.jsx)(a.ArrowRightIcon,{})})]},c):(0,r.jsxs)(U.l.Item,{onSelect:()=>t(c,!1,l??0),children:[(0,r.jsx)(U.l.LeadingVisual,{children:(0,r.jsx)(_.r,{src:n,square:i,size:16})}),e,"/",o,(0,r.jsx)(U.l.TrailingVisual,{children:(0,r.jsx)(a.ArrowRightIcon,{})})]},c)}})}try{eO.displayName||(eO.displayName="TopicList")}catch{}let eV=()=>{let e=(0,b.Pk)(),t=(0,h.useMemo)(()=>e.ssoOrganizations?e.ssoOrganizations.map(e=>e.login):[],[e.ssoOrganizations]);return(0,r.jsx)(l.A,{sx:{display:"flex",flexDirection:"column",flexGrow:1,height:"100%"},children:(0,r.jsxs)(l.A,{sx:{display:"flex",flexDirection:"column",flexGrow:1},children:[(0,r.jsx)(eG,{mode:e.mode}),(0,r.jsx)(l.A,{sx:{px:3,"> button":{m:"0 auto"}},children:(0,r.jsx)(eO,{})}),(0,r.jsx)(e$.x,{portalContainerName:ev.E5,protectedOrgs:t,redirectURI:()=>`/search/refresh_blackbird_caches?return_to=${location.href}`,sx:{mx:3,mb:3}}),(0,r.jsx)(eQ,{currentTopic:e.currentTopic})]})})};function eQ({currentTopic:e}){return(0,m.P)(e)?(0,r.jsx)(l.A,{sx:{mt:3,mb:4},children:(0,r.jsx)(eY,{docset:e})}):null}function eY({docset:e}){return(0,r.jsxs)(l.A,{sx:{display:"flex",flexDirection:"column",gap:3,border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"var(--borderRadius-large)",padding:3},children:[(0,r.jsxs)(l.A,{sx:{display:"flex",alignItems:"baseline",gap:2},children:[(0,r.jsx)(eI,{docset:e,size:24}),(0,r.jsx)(u.A,{as:"h3",sx:{fontSize:1,m:0},children:e.name})," ",(0,r.jsx)(p.A,{sx:{fontSize:0,color:"fg.muted"},children:"Knowledge base added to conversation"})]}),(0,r.jsx)(u.A,{as:"h4",sx:{fontSize:0,m:0,color:"fg.muted",fontWeight:"500"},children:"Repositories in this knowledge base"}),(0,r.jsx)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:3},children:e.repos.map(e=>(0,r.jsxs)(l.A,{sx:{whiteSpace:"nowrap"},children:[(0,r.jsx)(a.RepoIcon,{}),` ${e}`]},e))})]})}try{eV.displayName||(eV.displayName="TopicPicker")}catch{}try{eQ.displayName||(eQ.displayName="TopicDescription")}catch{}try{eY.displayName||(eY.displayName="DocsetDescription")}catch{}let eJ=({messages:e,isWaitingOnCopilot:t,inputRef:s,onMessageReceived:n,panelWidth:i})=>{let a=(0,b.Pk)(),{showTopicPicker:c}=a,[d,u]=(0,h.useState)(!0),p=(0,h.useRef)([]),x=g.W.copilotImmersiveV1&&"immersive"===a.mode,m=(0,h.useMemo)(()=>({messages:e,isWaitingOnCopilot:t}),[e,t]),{containerRef:f}=(0,o.G)({focusInStrategy:()=>{let e=document.activeElement;return p.current.includes(e)?e:p.current[p.current.length-1]},focusableElementFilter:e=>!!e.classList.contains("message-container")&&(p.current.includes(e)||p.current.push(e),!0),disabled:!d},[m]),y=a.streamingMessage??e[e.length-1],j=(0,h.useRef)(y?.id),v=(0,h.useRef)(a.currentReferences.length),w=(0,h.useRef)(!!a.suggestions);return(0,h.useEffect)(()=>{j.current!==y?.id||v.current<a.currentReferences.length||y?.error?.isError||!w.current&&a.suggestions?(n({forceScroll:!0}),j.current=y?.id,w.current=!!a.suggestions):n({forceScroll:!1}),v.current=a.currentReferences.length},[j,y?.id,y?.content,y?.error,n,a.currentReferences,a.suggestions]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"sr-only",children:"Copilot Chat"}),c?(0,r.jsx)(eV,{}):(0,r.jsxs)(l.A,{ref:f,sx:{display:"flex",flexDirection:"column",minHeight:"0",flexGrow:1},children:[(0,r.jsxs)(l.A,{className:"copilot-messages-container",sx:{display:"flex",flexDirection:"column",flexGrow:1},children:[!x&&(0,r.jsx)(eD,{}),e.map((t,n)=>(0,r.jsx)(ep,{isLatestMessage:"assistant"===t.role&&n===e.length-1,message:t,inputRef:s,panelWidth:i,setParentFocusZoneEnabled:u},n)),a.streamingMessage&&(0,r.jsx)(ep,{message:a.streamingMessage,isStreaming:!0,isLatestMessage:!0,panelWidth:i})]}),!c&&a.currentReferences.length>0&&(0,r.jsx)(eA,{})]})]})},eZ=()=>(0,r.jsxs)(l.A,{sx:{m:"auto",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,r.jsx)(c.A,{size:"large"}),(0,r.jsx)(l.A,{sx:{p:3,color:"fg.subtle"},children:"Loading conversation\u2026"})]}),eX=()=>{let{mode:e,reviewLab:t}=(0,b.Pk)();return(0,r.jsxs)(l.A,{sx:{display:"flex",gap:"2",alignItems:"center",py:3,pr:3,pl:"immersive"===e?3:2,color:"fg.subtle"},children:[(0,r.jsx)(x.A,{icon:a.AlertIcon}),"Failed to load previous messages.",t&&(0,r.jsx)(r.Fragment,{children:"\xa0You are in a review lab. Please check that you are connected to the Developer VPN."})]})},e0=({inputRef:e,panelWidth:t})=>{let s=(0,b.Pk)(),n=(0,y.b)(),{currentReferences:a,messagesLoading:o,threadsLoading:c,currentTopic:d,messages:u,mode:p,selectedThreadID:x,showTopicPicker:j,context:v,scrollToTop:w}=s,A=n.getSelectedThread(s),k=(0,h.useMemo)(()=>e3(Object.keys(e2)).slice(0,4).map(e=>({heading:e,content:e3(e2[e])[0]})),[]),S=(0,h.useRef)(null),C=e||S,I=(0,h.useRef)(null),N=(0,h.useRef)(!0),T=(0,h.useRef)(w);(0,h.useEffect)(()=>{A&&u.length>0&&n.showTopicPicker(!1)},[A,u.length,n]),(0,h.useEffect)(()=>{if(!x||"assistive"===p)return;let e=`${m.Jz}/c/${x}`;window.location.pathname!==e&&0!==u.length&&history.pushState(null,"",e)},[x,p,u.length]),(0,h.useEffect)(()=>{let e=d?(0,m.P)(d)?d.name:String(d.id):null,t=async()=>{if(g.W.staticThreadSuggestions)try{let e=await n.createThread();f.J.selectedThreadID=e?.id||null}catch{console.error("Failed to create a new thread for suggestions.")}};d&&!x&&t(),x&&d&&f.J.setSelectedTopic(x,e)},[n,x,d]),(0,h.useEffect)(()=>{let e=window.setTimeout(()=>{C.current?.focus()},1);return()=>{window.clearTimeout(e)}},[C]),(0,h.useEffect)(()=>((async()=>{if(!g.W.staticThreadSuggestions||!s.selectedThreadID)return;let e=s.context?.[0]??s.currentTopic;e&&s.selectedThreadID&&await n.generateSuggestions(e,s.selectedThreadID)})(),()=>{n.clearSuggestions()}),[n,s.context,s.currentTopic,s.selectedThreadID]);let R=(0,h.useCallback)(async e=>{T.current=!1,""!==e.trim()&&await n.sendChatMessage(A,e,a,d,v,void 0,s.customInstructions)},[v,a,d,n,s.customInstructions,A]),z=(0,h.useCallback)(e=>{let t=e.target;N.current=1>Math.abs(t.scrollHeight-t.scrollTop-t.clientHeight)},[]),W=(0,h.useCallback)(({forceScroll:e})=>{I.current&&(N.current||e)&&!T.current&&(function(e){return!!e.scrollTo&&"auto"===window.getComputedStyle(e).overflowY}(I.current)?I.current.scrollTo(0,I.current.scrollHeight):window.scrollTo(0,document.body.scrollHeight))},[]),E="loading"===o.state&&s.selectedThreadID&&!j,L="error"===o.state||"error"===c.state,P="loaded"===o.state,$=g.W.copilotImmersiveV1&&"immersive"===s.mode,[M]=(0,h.useState)(s.renderAttachKnowledgeBaseHerePopover),G=!!(!E&&!s.currentTopic&&!j&&0===u.length&&!M&&0===a.length);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.A,{className:"copilot-chat-messages",onScroll:z,ref:I,sx:{overflowY:"auto",overscrollBehavior:"contain",display:"flex",flexDirection:"column",flex:"1 1 auto",scrollbarGutter:"stable"},children:[E&&(0,r.jsx)(eZ,{}),L&&(0,r.jsx)(eX,{}),P&&!E&&(0,r.jsx)(eJ,{...s,inputRef:C,onMessageReceived:W,panelWidth:t}),(0,r.jsx)(ev.Cb,{})]}),G&&(0,r.jsx)(l.A,{className:"copilot-chat-messages",sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2,px:3,mb:3,scrollbarGutter:"stable"},children:k.map((e,t)=>(0,r.jsx)(e1,{heading:e.heading,content:e.content,onSubmit:()=>{n.sendChatMessage(n.getSelectedThread(s),e.content,s.currentReferences,s.currentTopic,s.context),(0,i.BI)("copilot_chat_suggestion_click",{topic:s.currentTopic?.name})}},t))}),!E&&!j&&(0,r.jsxs)(l.A,{className:"copilot-chat-input copilot-chat-input-outer",sx:{display:"flex",flexDirection:"column",mt:"auto",px:3,pb:3,zIndex:1},children:[!G&&0===u.length&&!s.showTopicPicker&&(0,r.jsx)(en,{panelWidth:t,suggestionKind:"initial"}),(0,r.jsx)(D,{textAreaRef:C,onSubmit:R,isLoading:s.isWaitingOnCopilot||"loading"===s.slashCommandLoading.state,isStreaming:!!s.streamingMessage,panelWidth:t}),$&&(0,r.jsx)(l.A,{sx:{textAlign:"center",mt:2,color:"fg.subtle",fontSize:"12px"},children:"Copilot can make mistakes. Review output before use."})]}),(0,r.jsx)(ev.zc,{})]})};function e1({heading:e,content:t,onSubmit:s}){return(0,r.jsxs)(d.Q,{sx:{bg:"canvas.default",height:"auto",minWidth:"auto",borderBottom:"1px solid",borderColor:"border.default",border:"1px solid var(--borderColor-default, var(--color-border-default))",flex:"1 1 49%",display:"flex",flexDirection:"column",justifyContent:"center",p:2},onClick:s,children:[(0,r.jsx)(u.A,{as:"h3",sx:{textAlign:"center",fontSize:1,m:0,mb:1,wordWrap:"break-word",overflowWrap:"break-word",whiteSpace:"normal"},children:e}),(0,r.jsx)(p.A,{as:"p",sx:{fontSize:0,fontWeight:400,textAlign:"center",color:"fg.muted",m:0,textWrap:"balance",wordWrap:"break-word",overflowWrap:"break-word",whiteSpace:"normal"},children:t})]})}let e2={"Languages & frameworks":["Show me Python beginner projects.","Explain Java's garbage collection.","Start me off with Node.js.","Introduce me to Django best practices."],"Tools & environments":["Set up a local development environment.","Demonstrate the basics of Docker.","Get me started with Git.","Recommend popular VS Code extensions."],"Open source & contribution":["Suggest 10 open source projects I can contribute to.","Walk me through the GitHub Pull Request flow.","How do I start my own open source project?","Guide me through contributing to React's codebase."],"Best practices & concepts":["Explain the SOLID principles of object-oriented design.","Introduce me to test-driven development.","Describe common design patterns.","Teach me about RESTful API design."],"Web development":["Guide me through creating a basic website.","Introduce HTML5 and CSS3 features.","Explain responsive web design.","Start me off with Tailwind CSS."],"Databases & data":["Get me started with SQL queries.","Recommend popular NoSQL databases.","How to back up a database?","Give a walkthrough on normalizing a database."],"Algorithms & data structures":["Teach me basic sorting algorithms.","Explain binary search trees.","Introduce me to graph algorithms.","What is a hash table?"],"Security & authentication":["Give a guide on basic web security.","Show me how to set up OAuth.","What's a JSON Web Token?","Describe common encryption techniques."],"Mobile development":["Kickstart my journey with Android development.","Introduce me to iOS app basics.","Recommend cross-platform mobile frameworks.","Give a guide to the app store submission process."],"Cloud & DevOps":["Start me off with AWS basics.","How do I deploy apps on Azure DevOps?","Introduce me to Kubernetes.","What are the basics of continuous integration/continuous deployment?"],"Frontend frameworks & libraries":["Get me started with React.","Walk me through Vue.js essentials.","What are some best practices in Angular development?","How do I use Svelte for web apps?"],"Performance & optimization":["Teach me about website performance optimization.","Explain database indexing benefits.","What are some tips to optimize JavaScript code?","Give a guide to efficient API caching."]};function e3(e){let t=e.slice();for(let e=t.length-1;e>0;e--){let s=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[s],t[s]=n}return t}try{eJ.displayName||(eJ.displayName="Messages")}catch{}try{eZ.displayName||(eZ.displayName="Loading")}catch{}try{eX.displayName||(eX.displayName="Error")}catch{}try{e0.displayName||(e0.displayName="Chat")}catch{}try{e1.displayName||(e1.displayName="SuggestedPrompt")}catch{}},23398:(e,t,s)=>{s.d(t,{A:()=>l});var n=s(74848),r=s(38621),i=s(75177),a=s(38553),o=s(57938);function l(e){let{isLoading:t,isError:s,hasUnreadMessages:l,fill:c,bg:d,borderColor:u,customIcon:p,mode:x}=e,h=!!o.W.copilotImmersiveV1&&!!x&&"immersive"===x;return(0,n.jsxs)(i.A,{sx:{borderRadius:"100%",position:h?"absolute":"relative",bg:h?"":d||(s?"attention.subtle":"canvas.subtle"),width:24,height:24,display:"flex",alignItems:"center",justifyContent:"center",border:h?"":"1px solid",borderColor:h?"":u||(s?"attention.muted":"border.default"),color:c||(t?"accent.fg":h?"fg.muted":"fg.default"),flexShrink:0,left:h?"-24px":"0",top:h?"21px":"0"},children:[(0,n.jsx)(i.A,{sx:{position:"absolute",display:t?"flex":"none"},children:(0,n.jsx)(a.A,{size:"medium",sx:{width:24,height:24,color:"accent.fg"}})}),l&&(0,n.jsx)(i.A,{className:"unread-indicator",sx:{width:"10px",height:"10px",left:"16px",top:"-2px",borderColor:"canvas.default"}}),p||(0,n.jsx)(r.CopilotIcon,{size:h?24:12}),s?(0,n.jsx)(i.A,{sx:{position:"absolute",bottom:0,right:0,transform:"translate(4px,4px)",color:"attention.fg"},children:(0,n.jsx)(r.AlertFillIcon,{size:12})}):null]})}try{l.displayName||(l.displayName="CopilotBadge")}catch{}},16372:(e,t,s)=>{s.d(t,{W:()=>i});var n=s(74848),r=s(22868);let i=({ownerLogin:e,ownerType:t,size:s})=>(0,n.jsx)(r.r,{src:`/${e}.png?s=40`,square:"Organization"===t,size:s});try{i.displayName||(i.displayName="RepoAvatar")}catch{}},87726:(e,t,s)=>{s.d(t,{x:()=>p});var n=s(74848),r=s(38621),i=s(75177),a=s(65481),o=s(34614),l=s(89323),c=s(16823),d=s(30729),u=s(47767);function p({portalContainerName:e,protectedOrgs:t,redirectURI:s,sx:l}){let c=(0,u.zy)();if(!t||0===t.length)return null;let p=(0,n.jsx)("b",{children:t.slice(0,3).join(", ")});return 2===t.length&&(p=(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:t[0]})," and ",(0,n.jsx)("b",{children:t[1]})]})),3===t.length&&(p=(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:t.slice(0,2).join(", ")}),", and ",(0,n.jsx)("b",{children:t[2]})]})),(0,n.jsx)(i.A,{sx:l,"data-testid":"sso-banner",children:(0,n.jsx)(i.A,{sx:{fontSize:1},children:(0,n.jsx)("section",{"aria-label":"Single sign on information",children:(0,n.jsx)(a.A,{sx:{p:3,borderRadius:2,borderWidth:1,borderStyle:"solid",borderColor:"accent.muted",fontSize:1},children:1===t.length?(0,n.jsxs)("div",{children:[(0,n.jsx)(d.A,{icon:r.ShieldLockIcon}),(0,n.jsx)(o.A,{inline:!0,href:`/orgs/${t[0]}/sso?return_to=${h({location:c,redirectURI:s})}`,children:"Single sign-on"}),"\xa0to see results in the ",(0,n.jsx)("b",{children:t[0]})," organization."]}):(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"baseline",flexWrap:"wrap",gap:2},children:[(0,n.jsxs)(i.A,{sx:{flexGrow:1},children:[(0,n.jsx)(d.A,{icon:r.ShieldLockIcon}),"Single sign on to see results in the ",p," ",t.length>3?`and ${t.length-3} other `:"",t.length>1?"organizations":"organization","."]}),(0,n.jsx)(i.A,{sx:{mt:[2,2,0]},children:(0,n.jsx)(x,{portalContainerName:e,protectedOrgs:t,redirectURI:s})})]})})})})})}function x({portalContainerName:e,protectedOrgs:t,redirectURI:s}){let r=(0,u.zy)();return(0,n.jsxs)(l.W,{children:[(0,n.jsx)(l.W.Button,{size:"small",children:"Select an organization"}),(0,n.jsx)(l.W.Overlay,{portalContainerName:e,children:(0,n.jsx)(c.l,{children:t.map(e=>(0,n.jsx)(c.l.Item,{onSelect:()=>window.location.href=`/orgs/${e}/sso?return_to=${h({location:r,redirectURI:s})}`,children:e},`org-${e}`))})})]})}function h({location:e,redirectURI:t}){return encodeURIComponent(t?t(e):e.pathname+e.search+e.hash)}try{p.displayName||(p.displayName="SingleSignOnBanner")}catch{}try{x.displayName||(x.displayName="SingleSignOnButton")}catch{}}}]);
//# sourceMappingURL=ui_packages_copilot-chat_components_Chat_tsx-d972b3ca8204.js.map
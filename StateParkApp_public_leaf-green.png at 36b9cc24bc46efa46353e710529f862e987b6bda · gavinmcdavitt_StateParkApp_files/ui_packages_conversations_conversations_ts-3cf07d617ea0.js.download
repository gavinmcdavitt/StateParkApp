"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_conversations_conversations_ts"],{74408:(e,t,n)=>{n.d(t,{$S:()=>R,Su:()=>b,uo:()=>y,dE:()=>eR,c7:()=>e_,H1:()=>eT,UA:()=>eC,cT:()=>eU,i4:()=>eS,nN:()=>p,L4:()=>m});var i=n(74848),r=n(69404),a=n(97156),o=n(75177),s=n(96540);let{getItem:l,removeItem:d,setItem:c}=(0,n(74572).D)("localStorage"),u=(e,t)=>{let{diffSide:n,filePath:i,line:r,subjectId:a}=e;if(t)return`PullRequest:${a}-File:${i}`;if(void 0!==r&&void 0!==n)return`PullRequest:${a}-File:${i}-Line:${r}-DiffSide:${n}`;throw Error("Cannot build diff line comment cache key for a comment without a line number or diff side")};function m({diffSide:e,filePath:t,handlePersistedCommentExists:n,line:i,subjectId:r,threadId:a,fileLevelComment:o}){let m,h;let f=(0,s.useMemo)(()=>a||(a??u({diffSide:e,filePath:t,line:i,subjectId:r},o)),[e,t,i,r,a,o]),{hasPersistedComment:g,removePersistedCommentFromStorage:x}=(m=l(f),h=!!m?.text?.trim(),(0,s.useEffect)(()=>{h&&n?.(m)},[h]),{hasPersistedComment:h,removePersistedCommentFromStorage:()=>{d(f),h=!1,m=null}});return{hasPersistedComment:g,persistCommentToStorage:e=>{let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide}),c(f,t)},removePersistedCommentFromStorage:x}}function h(e,t){for(let n of function e(t,n=[]){if(""===t)return n;let i=t.match(f());if(!i)return n;let r=i.groups.fence;if(!r)return n;let a=r.includes("~")?"~":"`",o=t.match(function(e,t){let n=f([e],t);return RegExp(`${n.source}(?:\r?
)(?<suggestion>.*?)(?:\r?
)^ {0,3}${e}{${t},}[ 	]*$`,"ms")}(a,r.length));if(!o)return n;let s=0,l=i.groups.indent;""!==l&&(s=l.length);let d=o.groups.suggestion;if(s>0){let e=RegExp(`^ {0,${s}}`,"m");d=d.replace(e,"")}return n.push(d),e(t.slice(o.index+o[0].length),n)}(e))if(n===t)return{isValid:!1,errorMessage:"Suggested change cannot be the same as the original line"};return{isValid:!0,errorMessage:""}}function f(e=["`","~"],t){let n=t?`{${t}}`:"{3,}",i=e.map(e=>`${e}${n}`);return RegExp(`^(?<indent> {0,3})(?<fence>${i.join("|")})suggestion[ 	]*$`,"m")}var g=n(41907);let x=(0,s.createContext)(null),p=()=>(0,s.useContext)(x),y=x.Provider;try{x.displayName||(x.displayName="ConversationMarkdownSubjectContext")}catch{}let b=(0,s.forwardRef)(({children:e,...t},n)=>{let r=p();return(0,i.jsx)(g.h,{...t,ref:n,placeholder:"Leave a comment",actions:e,subject:r??void 0,showLabel:!1})});function j({batchPending:e,batchingEnabled:t,commentBoxConfig:n,condensed:l,fileLevelComment:d,filePath:c,focusOnMount:u,isReplying:f,lineNumber:g,onAddComment:x,onCancelComment:p,onPersistedCommentExists:y,quotedText:j="",side:C,subjectId:N,threadId:v,suggestedChangesConfig:S}){let[T,A]=(0,s.useState)(j),[E,D]=(0,s.useState)(!1),[L,I]=(0,s.useState)(),_=(0,s.useRef)(null),k=(0,s.useRef)(null),{persistCommentToStorage:R,removePersistedCommentFromStorage:w}=m({diffSide:C,filePath:c,line:g,subjectId:N,threadId:v,handlePersistedCommentExists:({text:e})=>{e&&(A(e),y?.())},fileLevelComment:!!d});(0,s.useEffect)(()=>{if(u){let e=setTimeout(()=>{if(k.current&&(a.XC||a.cg)){let e=k.current,t=e.getBoundingClientRect(),n=a.XC?.documentElement.clientHeight||0;if(!(t.top>=0&&t.bottom<=(a.cg?.innerHeight||n))){let i=t.top,r=a.XC?.documentElement.getBoundingClientRect().top||0,o=e.clientHeight*(2/3);a.cg?.scrollTo({top:i-r-2/3*n+o,behavior:"smooth"})}}_.current?.focus()},100);return()=>{window.clearTimeout(e)}}},[u]);let O=({submitBatch:e})=>{D(!0),I(void 0);let t=h(T,S?.sourceContentFromDiffLines??"");if(!t.isValid){I(t.errorMessage),D(!1);return}x?.({commentText:T,onCompleted(){D(!1),B()},onError(e){D(!1);let t="Failed to save comment";e.message&&(t=`${t}: ${e.message}`),I(t)},submitBatch:e})},U=()=>O({submitBatch:!1}),M=()=>O({submitBatch:!0}),B=()=>{w(),A(""),p?.()},P={footer:{justifyContent:f?"end":"space-between","> div:first-child":{display:l||f?"none":"flex"},...l&&{"> div:last-child":{display:"flex",flexDirection:"column",width:"100%"}}}};return(0,i.jsx)(o.A,{sx:{display:"flex",flexDirection:"column",fieldset:{minWidth:0,width:["100%"]}},children:(0,i.jsxs)(b,{ref:_,label:"Add diff comment",sx:P,value:T,onChange:e=>{I(void 0),R({text:e}),A(e)},onPrimaryAction:t?U:M,userSettings:n,suggestedChangesConfig:S,markdownErrorMessage:L,children:[p&&(0,i.jsx)(r.x,{disabled:E,sx:{py:1,px:2},variant:"default",onClick:B,children:"Cancel"}),!e&&(0,i.jsx)(r.x,{disabled:E||!T.length,sx:{py:1,px:2},variant:t?"default":"primary",onClick:M,ref:k,children:f?"Reply":"Comment"}),t&&(0,i.jsx)(r.x,{disabled:E||!T.length,sx:{py:1,px:2},variant:"primary",onClick:U,children:e?"Add review comment":"Start a review"})]})})}b.displayName="ConversationCommentBox";try{j.displayName||(j.displayName="AddCommentEditor")}catch{}var C=n(71312),N=n(73272),v=n(69676),S=n(82678),T=n(38553),A=n(82560),E=n(67749),D=n(61043),L=n(86079);function I({children:e,footerButtons:t}){let{containerRef:n}=(0,S.G)({bindKeys:v.z0.ArrowHorizontal|v.z0.Tab,focusInStrategy:"closest"});return t?(0,i.jsx)(L.l.Footer,{ref:n,children:(0,i.jsxs)(o.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)(o.A,{sx:{display:"flex",flexDirection:"row",gap:2,justifyContent:"flex-end"},children:(0,i.jsx)(L.l.Buttons,{buttons:t})}),e]})}):null}let _={CHANGE_COMMIT_MESSAGE:"CHANGE_COMMIT_MESSAGE",CHANGE_EXTENDED_DESCRIPTION:"CHANGE_EXTENDED_DESCRIPTION"};function k(e,t){switch(t.type){case _.CHANGE_COMMIT_MESSAGE:return{...e,commitMessage:t.payload};case _.CHANGE_EXTENDED_DESCRIPTION:return{...e,extendedDescription:t.payload};default:return console.error("Unknown suggested change action."),e}}function R({authorLogins:e,batchSize:t,onClose:n,onCommit:r}){let a=(0,N.A)(),{sendAnalyticsEvent:l}=(0,C.s)(),[d,c]=(0,s.useState)(!1),[u,m]=(0,s.useState)(),[h,f]=(0,s.useReducer)(k,{commitMessage:1===e.length?`Apply suggestion from @${e[0]}`:1===new Set(e).size?`Apply suggestions from @${e[0]}`:"Apply suggestions from code review",extendedDescription:""}),g=(0,s.useCallback)((e,t,n)=>{if(!a())return;let i="There was an error trying to commit changes";n?i+=`: ${n}`:i+=".",c(!1),m(i)},[a]),x=(0,s.useCallback)(()=>{a()&&(c(!1),u&&m(void 0))},[u,a]),p=(0,s.useCallback)(()=>{d||(c(!0),l("comments.commit_suggestion","COMMIT_SUGGESTION_DIALOG_BUTTON",{batchSize:t}),r(`${h.commitMessage}

${h.extendedDescription}`,g,x))},[t,h.commitMessage,h.extendedDescription,x,g,d,r,l]);return(0,i.jsxs)(L.l,{title:"Apply suggestion",renderFooter:()=>(0,i.jsx)(I,{footerButtons:[{content:"Cancel",onClick:n},{content:(0,i.jsxs)(o.A,{as:"span",sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:["Commit changes",d&&(0,i.jsx)(T.A,{size:"small",sx:{ml:1}})]}),onClick:p,buttonType:"primary"}],children:u&&(0,i.jsx)(A.A.Validation,{sx:{mt:2,pt:1,justifyContent:"flex-end"},variant:"error",children:u})}),onClose:n,children:[(0,i.jsxs)(A.A,{sx:{mb:2},children:[(0,i.jsx)(A.A.Label,{children:"Commit message"}),(0,i.jsx)(E.A,{block:!0,name:"commit_message",onChange:e=>f({type:_.CHANGE_COMMIT_MESSAGE,payload:e.target.value}),value:h.commitMessage})]}),(0,i.jsxs)(A.A,{children:[(0,i.jsx)(A.A.Label,{children:"Extended description (optional)"}),(0,i.jsx)(D.Ay,{block:!0,rows:3,placeholder:"Add an optional description...",onChange:e=>f({type:_.CHANGE_EXTENDED_DESCRIPTION,payload:e.target.value}),value:h.extendedDescription})]})]})}try{I.displayName||(I.displayName="DialogFooter")}catch{}try{R.displayName||(R.displayName="ApplySuggestionDialog")}catch{}var w=n(67726),O=n(85349),U=n(16255);let M=(0,s.createContext)({});function B({children:e}){let[t,n]=(0,s.useState)(!1),r=(0,s.useMemo)(()=>({isDialogOpen:t,setIsDialogOpen:n}),[t,n]);return(0,i.jsx)(M.Provider,{value:r,children:e})}let P=()=>(0,s.useContext)(M);try{M.displayName||(M.displayName="DialogStateContext")}catch{}try{B.displayName||(B.displayName="DialogStateProvider")}catch{}var H=n(38621),$=n(87330),G=n(76889),F=n(52464);function V({markerId:e,markers:t}){let n=t.findIndex(t=>t.id===e);return(0,i.jsxs)(F.A,{sx:{color:"fg.muted"},children:[(0,i.jsx)(F.A,{sx:{fontWeight:500,color:"fg.default"},children:n+1})," of"," ",(0,i.jsx)(F.A,{sx:{fontWeight:500,color:"fg.default"},children:t.length})]})}function z({markerId:e,markerNavigationImplementation:t,onNavigate:n}){let{incrementActiveMarker:r,decrementActiveMarker:a,filteredMarkers:s}=t;return s.find(t=>t.id===e)&&s.length>1?(0,i.jsxs)(o.A,{sx:{pr:1,display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,i.jsx)($.K,{unsafeDisableTooltip:!0,"aria-label":"Load previous marker",icon:H.ChevronLeftIcon,variant:"invisible",onClick:()=>{a(e),n()}}),(0,i.jsx)($.K,{unsafeDisableTooltip:!0,"aria-label":"Load next marker",icon:H.ChevronRightIcon,variant:"invisible",onClick:()=>{r(e),n()}}),(0,i.jsx)(o.A,{sx:{ml:1},children:(0,i.jsx)(V,{markerId:e,markers:s})})]}):null}try{V.displayName||(V.displayName="MarkerPosition")}catch{}try{z.displayName||(z.displayName="GlobalMarkerNavigation")}catch{}function W({annotation:e,markerNavigationImplementation:t,onClose:n,ghostUser:r}){return(0,i.jsxs)(o.A,{sx:{width:"clamp(240px, 100vw, 540px)"},children:[(0,i.jsx)(o.A,{sx:{borderBottom:"1px solid",borderBottomColor:"border.default",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",p:1,background:"canvas.default"},children:(0,i.jsxs)(o.A,{sx:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center"},children:[(0,i.jsx)(z,{markerId:e.id,markerNavigationImplementation:t,onNavigate:n}),(0,i.jsx)(o.A,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center",justifyContent:"right",flexGrow:1},children:(0,i.jsx)($.K,{unsafeDisableTooltip:!0,"aria-label":"Close annotation",icon:H.XIcon,variant:"invisible",onClick:n})})]})}),(0,i.jsx)(G.Y,{annotation:e,ghostUser:r})]})}try{W.displayName||(W.displayName="AnnotationDialog")}catch{}var q=n(82667),K=n(22868),Q=n(89323),X=n(16823),Y=n(30729),J=n(83994);function Z({anchorRef:e,annotations:t,handleOpenChange:n,threads:r,onShowAnnotation:a,onShowCommentThread:s,ghostUser:l=q.t.ghostUser}){function d(e){return{display:"-webkit-box",overflow:"hidden","-webkit-box-orient":"vertical","-webkit-line-clamp":e.toString(),maxWidth:"unset"}}return(0,i.jsx)(Q.W,{anchorRef:e,open:!0,onOpenChange:n,children:(0,i.jsx)(Q.W.Overlay,{width:"small",children:(0,i.jsx)("div",{children:(0,i.jsxs)(X.l,{children:[t.map(e=>(0,i.jsxs)(X.l.Item,{onSelect:()=>a(e.id),children:[(0,i.jsx)(X.l.LeadingVisual,{sx:{mr:2},children:(0,i.jsx)(J.Xh,{annotationLevel:e.annotationLevel},e.id)}),(0,i.jsxs)(o.A,{sx:{...d(2)},children:[e.checkSuite.name," /"," ",(0,i.jsx)(F.A,{sx:{fontWeight:400,color:"fg.muted"},children:e.checkRun.name})]}),(0,i.jsx)(X.l.Description,{variant:"block",children:(0,i.jsx)(o.A,{sx:{...d(1)},children:e.title})}),(0,i.jsx)(X.l.TrailingVisual,{children:(0,i.jsx)(Y.A,{icon:H.ArrowRightIcon})})]},e.id)),r.map(e=>(0,i.jsxs)(X.l.Item,{onSelect:()=>s(e.id),children:[(0,i.jsx)(X.l.LeadingVisual,{sx:{mr:2},children:(0,i.jsx)(K.r,{alt:e.author.login,size:20,src:e.author.avatarUrl??l.avatarUrl})}),"Thread by ",e.author.login,(0,i.jsxs)(X.l.Description,{variant:"block",children:[e.commentCount," comment",e.commentCount>1?"s":""]}),(0,i.jsx)(X.l.TrailingVisual,{children:(0,i.jsx)(Y.A,{icon:H.ArrowRightIcon})})]},e.id))]})})})})}try{Z.displayName||(Z.displayName="MarkersListActionMenu")}catch{}var ee=n(54156),et=n(47139),en=n(80577),ei=n(96711);function er(e,t="r"){history.replaceState(null,"",`#${t}${e}`)}var ea=n(76919),eo=n(93461),es=n(34838),el=n(34306),ed=n(22084),ec=n(51012),eu=n(40961),em=n(55847);function eh({commentingImplementation:e,suggestedChange:t}){let{sendAnalyticsEvent:n}=(0,C.s)();return(0,i.jsx)(o.A,{sx:{display:"flex",flexDirection:"row-reverse"},children:(0,i.jsx)(em.Q,{variant:"primary",onClick:()=>{n("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON"),e.addSuggestedChangeToPendingBatch(t)},children:"Add suggestion to batch"})})}try{eh.displayName||(eh.displayName="AddToExistingBatch")}catch{}var ef=n(12094);let eg={addSuggestionToBatch:{text:"Add suggestion to batch"},applySuggestion:{text:"Apply suggestion"}};function ex({commentingImplementation:e,onOpenDialog:t,suggestedChange:n}){let{sendAnalyticsEvent:r}=(0,C.s)(),[a,l]=(0,s.useState)(eg.addSuggestionToBatch),[d,c]=(0,s.useState)(!1),u=(0,s.useRef)(null),m=(0,s.useRef)(null),h=()=>c(!d),{addSuggestedChangeToPendingBatch:f}=e,g=(0,s.useCallback)(()=>{a===eg.addSuggestionToBatch&&(f(n),r("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")),a===eg.applySuggestion&&t(m)},[f,t,a,r,n]);return(0,i.jsx)(o.A,{sx:{display:"flex",flexDirection:"row-reverse"},children:(0,i.jsxs)(ef.A,{children:[(0,i.jsx)(em.Q,{variant:"primary",onClick:g,ref:m,children:a.text}),(0,i.jsx)($.K,{unsafeDisableTooltip:!0,ref:u,"aria-haspopup":"true","aria-label":"More suggestion batching options",icon:H.TriangleDownIcon,size:"medium",variant:"primary",onClick:h}),(0,i.jsx)(Q.W,{anchorRef:u,open:d,onOpenChange:h,children:(0,i.jsx)(Q.W.Overlay,{width:"medium",children:(0,i.jsx)(X.l,{selectionVariant:"single",children:Object.keys(eg).map(e=>{let t=eg[e];return(0,i.jsx)(X.l.Item,{selected:a===t,onSelect:()=>l(t),children:t.text},e)})})})})]})})}try{ex.displayName||(ex.displayName="ApplyOrAddToBatch")}catch{}function ep({reason:e,sx:t}){return(0,i.jsx)(o.A,{sx:{m:2,...t},children:(0,i.jsx)(F.A,{as:"small",sx:{color:"fg.muted"},children:e})})}try{ep.displayName||(ep.displayName="CodeSuggestionUnavailable")}catch{}function ey({commentingImplementation:e,onOpenDialog:t,suggestedChange:n}){let r=(0,s.useRef)(null),a=(0,s.useCallback)(()=>{t(r)},[t]),l=e.pendingSuggestedChangesBatch.length,{sendAnalyticsEvent:d}=(0,C.s)();return(0,i.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",flexDirection:"row"},children:[(0,i.jsx)(et.A,{variant:"attention",sx:{my:"auto"},children:"Pending in batch"}),(0,i.jsxs)(o.A,{sx:{display:"flex",gap:2},children:[(0,i.jsx)(em.Q,{size:"medium",variant:"danger",onClick:()=>{e.removeSuggestedChangeFromPendingBatch(n),d("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},children:"Remove from batch"}),(0,i.jsx)(em.Q,{ref:r,size:"medium",count:l,variant:"primary",onClick:a,children:`Apply suggestion${l>1?"s":""}`})]})]})}try{ey.displayName||(ey.displayName="CommitOrRemoveFromBatch")}catch{}function eb({commentingImplementation:e,suggestedChange:t}){let{setIsDialogOpen:n}=P(),[r,a]=(0,s.useState)(!1),l=(0,s.useRef)(),{pendingSuggestedChangesBatch:d,submitSuggestedChanges:c}=e,u=(0,ea.c0)(t,d),m=0===d.length,{isValid:h,reason:f}=(0,ea.EJ)(t,d),g=(0,s.useMemo)(()=>u?d:[t],[u,d,t]),x=(0,s.useCallback)(e=>{a(e),n?.(e)},[n]),p=(0,s.useCallback)(()=>{if(x(!1),l.current){let e=l.current.current;setTimeout(()=>e?.focus())}},[x]),y=(0,s.useCallback)(e=>{x(!0),l.current=e},[x,l]),b=(0,s.useCallback)((e,t,n)=>{c({suggestedChanges:g,commitMessage:e,onCompleted:()=>{p(),n()},onError:t})},[p,c,g]);return(0,i.jsxs)(o.A,{sx:{p:2,borderTop:"1px solid",borderColor:"border.default"},children:[u&&(0,i.jsx)(ey,{commentingImplementation:e,suggestedChange:t,onOpenDialog:y}),!u&&!h&&f&&(0,i.jsx)(ep,{reason:f,sx:{m:0}}),!u&&m&&(0,i.jsx)(ex,{commentingImplementation:e,suggestedChange:t,onOpenDialog:y}),!u&&h&&!m&&(0,i.jsx)(eh,{commentingImplementation:e,suggestedChange:t}),r&&(0,i.jsx)(R,{authorLogins:g.map(e=>e.authorLogin),batchSize:g.length,onClose:p,onCommit:b})]})}try{eb.displayName||(eb.displayName="CodeSuggestionActions")}catch{}function ej({applySuggestedChangesValidationData:e,comment:t,commentBodyRef:n,commentingImplementation:r,filePath:a,isOutdated:o,isThreadResolved:l,subject:d,suggestedChangesConfig:c,threadId:u,viewerData:m}){let h=function(e,t,n,i,r){let[a,o]=(0,s.useState)();return(0,ec.N)(()=>{if(!e.current||"LINE"!==t.subjectType)return;let a=[...e.current.getElementsByClassName("js-apply-changes")];if(a.length>0){let e=[];for(let o of a){let a=o?.closest("div.js-suggested-changes-blob");if(!a)continue;let s=[...a.querySelectorAll(".js-blob-code-addition")];r.lineRange&&e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,path:n,ref:o,suggestion:s.map(e=>e.textContent),lineRange:r.lineRange,threadId:i})}o(e)}},[r.lineRange,t.author?.login,t.bodyHTML,t.id,t.subjectType,e,n,i]),a}(n,t,a,u,e);return(0,i.jsx)(i.Fragment,{children:h?.length?h.map(n=>{let{isValid:a,reason:s}=(0,ea.o_)({suggestedChange:n,isOutdated:o,isPending:"PENDING"===t.state,isResolved:l,pullRequestIsClosed:d?.state!=="OPEN",pullRequestIsInMergeQueue:!!d?.isInMergeQueue,userCanApplySuggestion:!!m?.viewerCanApplySuggestion,applySuggestedChangesValidationData:e,suggestedChangesConfig:c});return!a&&s?(0,eu.createPortal)((0,i.jsx)(ep,{reason:s}),n.ref):(0,eu.createPortal)((0,i.jsx)(eb,{commentingImplementation:r,suggestedChange:n}),n.ref)}):null})}try{ej.displayName||(ej.displayName="SuggestedChangeView")}catch{}function eC({isAnchorable:e=!1,index:t=0,isLastChild:n,isOutdated:r,isThreadResolved:l,anchorPrefix:d="r",comment:c,commentingImplementation:u,filePath:f,hideActions:x,onRefreshThread:p,onQuoteReply:y=w.l,subjectId:j,subject:C,threadCommentCount:N,threadId:v,threadsConnectionId:S,suggestedChangesConfig:T,applySuggestedChangesValidationData:A,viewerData:E,ghostUser:D=q.t.ghostUser}){let{addToast:L}=(0,ee.Y6)(),[I,_]=(0,s.useState)(!1),[k,R]=(0,s.useState)(c.isHidden),[O,U]=(0,s.useState)(c.body),[M,B]=(0,s.useState)(!1),[P,H]=(0,s.useState)(),{persistCommentToStorage:$,removePersistedCommentFromStorage:G}=m({subjectId:j,filePath:f,fileLevelComment:"FILE"===c.subjectType,threadId:c.id,handlePersistedCommentExists:({text:e})=>{e&&U(e)}}),{editComment:F,deleteComment:V,hideComment:z,unhideComment:W,lazyFetchReactionGroups:K,lazyFetchEditHistory:Q}=u,X=(0,s.useRef)(null),Y=(0,s.useRef)(null),J=()=>{X.current?.focus()};(0,s.useEffect)(()=>{if(I){let e=window.setTimeout(J);return()=>{window.clearTimeout(e)}}},[I]);let Z=(0,s.useCallback)(()=>{B(!0);let e=h(O,T?.sourceContentFromDiffLines??"");if(!e.isValid){H(e.errorMessage),B(!1);return}F({text:O,comment:c,onCompleted:()=>{_(!1),B(!1),G(),p?.(v)},onError:()=>{B(!1),L({type:"error",message:"Failed to update comment"})}})},[L,O,c,F,p,G,T,v]),et=c.currentDiffResourcePath?.split("#r").pop(),en=et?`${d}${et}`:void 0,ei=en&&a.fV?new URL(`${a.fV.pathname}#${en}`,a.fV.origin).toString():void 0,ea=(0,s.useRef)(null);(0,s.useEffect)(()=>{e&&et&&en&&window.location.hash.split("#").pop()===en&&(er(et,d),ea.current?.focus())},[d,en,et,e]);let ec={outline:"2px solid",outlineColor:"accent.fg",outlineOffset:"-2px",boxShadow:"none"},eu=t>0,em=t>1,eh=u.suggestedChangesEnabled,ef=I?"editing":k?"hidden":"visible";return(0,i.jsxs)(o.A,{ref:ea,id:e?en:void 0,tabIndex:-1,sx:{"&:not(:first-child)":{backgroundColor:"canvas.inset"},"&:first-child + div":{borderTop:"1px solid",borderColor:"border.muted"},":target":ec,":focus":ec,pb:eu?0:2},children:[em&&(0,i.jsx)(o.A,{sx:{display:"flex",pl:eu?1:0},children:(0,i.jsx)(o.A,{sx:{ml:4,height:8,borderLeft:"1px solid",borderColor:"border.default"}})}),(0,i.jsx)(o.A,{sx:{px:3,pt:em?0:2,pb:0},children:(0,i.jsx)(eo.Rt,{headingProps:{as:"h5"},avatarUrl:c.author?.avatarUrl??D.avatarUrl,comment:{...c,url:ei??"",referenceText:c.reference.text??`#${c.reference.number}`},commentRef:ea,deleteComment:()=>{V({commentId:c.id,onCompleted:()=>{p?.(v)},onError:()=>{B(!1),L({type:"error",message:"Failed to delete comment"})},threadCommentCount:N,threadId:v,threadsConnectionId:S,filePath:f})},editComment:()=>{_(!0)},hideComment:e=>{z({commentId:c.id,reason:e,onCompleted:()=>{p?.(v)},onError:()=>{B(!1),L({type:"error",message:"Failed to hide comment"})}})},onMinimize:R,isMinimized:k,commentAuthorLogin:c.author?.login??D.login,navigate:w.l,commentSubjectAuthorLogin:c.reference?.author?.login??"",commentSubjectType:u.commentSubjectType,onReplySelect:y,unhideComment:()=>{W({commentId:c.id,onCompleted:()=>{p?.(v)},onError:()=>{B(!1),L({type:"error",message:"Failed to unhide comment"})}})},hideActions:x,lazyFetchEditHistory:Q,isReply:!0})}),(0,i.jsxs)(o.A,{sx:{display:"flex",pl:eu?1:0},children:[eu&&(0,i.jsx)(o.A,{sx:{ml:4,mr:1,pl:3,borderLeft:"1px solid",borderColor:"border.default",...n&&{borderImage:"linear-gradient(to bottom, var(--borderColor-default, var(--color-border-default)), rgba(0, 0, 0, 0)) 1 100%"}}}),"editing"===ef&&(0,i.jsx)(o.A,{sx:{pr:2,pl:eu?0:2,pb:2,pt:1,flexGrow:1},children:(0,i.jsxs)(b,{ref:X,label:"Update comment",value:O,onChange:e=>{$({text:e}),U(e),H(void 0)},onPrimaryAction:Z,userSettings:u.commentBoxConfig,suggestedChangesConfig:T,markdownErrorMessage:P,children:[(0,i.jsx)(g.x,{variant:"default",onClick:()=>{_(!1),G(),U(c.body)},children:"Cancel"}),(0,i.jsx)(g.x,{disabled:M||!O.length,variant:"primary",onClick:Z,children:"Update"})]})}),"visible"===ef&&(0,i.jsx)(o.A,{sx:eu?{pb:2,pr:2,overflowX:"auto",width:"100%"}:{px:3,pb:2,width:"100%"},children:c.bodyHTML&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ed.oG,{ref:Y,className:"markdown-body","comment-testid":`Comment body html for comment ${c.id}`,html:c.bodyHTML,sx:{mt:1,fontSize:1}}),(0,i.jsx)(o.A,{sx:{display:"flex",flexDirection:"column",mt:3},children:K?(0,i.jsx)(s.Suspense,{fallback:(0,i.jsx)(el.e,{}),children:(0,i.jsx)(es.ReactionViewerQueryComponent,{id:c.id})}):(0,i.jsx)(es.ReactionViewer,{reactionGroups:c,subjectId:c.id})}),eh&&A&&(0,i.jsx)(ej,{comment:c,commentBodyRef:Y,commentingImplementation:u,filePath:f,isOutdated:r,isThreadResolved:l,threadId:v,suggestedChangesConfig:T,applySuggestedChangesValidationData:A,subject:C,viewerData:E})]})})]})]})}try{eC.displayName||(eC.displayName="ReviewThreadComment")}catch{}var eN=n(51888),ev=n(94640);function eS({sx:e,tabSize:t,thread:n,hideHeaderDetails:r,diffTableSx:a}){if(!n.subject?.diffLines||n.subject?.diffLines.length<1)return null;let s=(0,eN.c7)(n.subject.diffLines);return(0,i.jsxs)(o.A,{sx:{m:3,border:0,borderBottomWidth:6,borderStyle:"solid",borderColor:"border.muted",borderBottomLeftRadius:2,borderBottomRightRadius:2,...e},children:[!r&&(0,i.jsx)(o.A,{sx:{borderWidth:1,borderStyle:"solid",borderTopLeftRadius:2,borderTopRightRadius:2,borderColor:"border.muted",color:"fg.muted",px:2,py:1},children:(0,i.jsxs)(F.A,{sx:{fontSize:0,color:"fg.muted"},children:["Line"," ",(0,ev.Ah)({originalStartLine:n.subject.originalStartLine,originalEndLine:n.subject.originalEndLine,startDiffSide:n.subject.startDiffSide,endDiffSide:n.subject.endDiffSide}),", commit ",(0,i.jsx)("code",{children:n.subject.pullRequestCommit?.commit.abbreviatedOid})]})}),(0,i.jsx)(ev.l4,{lineWidth:s,lines:n.subject.diffLines,tabSize:t,sx:a})]})}try{eS.displayName||(eS.displayName="StaticUnifiedDiffPreview")}catch{}function eT({batchingEnabled:e,batchPending:t,commentAnchorPrefix:n,commentingImplementation:r,commentsConnectionId:a,filePath:l,hideDiffPreview:d,onRefreshThread:c,repositoryId:u,subject:m,subjectId:h,tabSize:f,thread:g,threadsConnectionId:x,shouldLimitHeight:p=!0,suggestedChangesConfig:y,viewerData:b,ghostUser:N}){let[v,S]=(0,s.useState)(!1),[T,A]=(0,s.useState)(void 0),{sendAnalyticsEvent:E}=(0,C.s)(),{addThreadReply:D}=r,L=e=>{A(e),S(!0)};if(null===g.commentsData.comments||g.commentsData.comments.length<1)return null;let I=(0,ea.Lm)(g),_="LINE"===g.subjectType?{lineRange:I}:void 0;return(0,i.jsx)("div",{"data-testid":"review-thread",children:(0,i.jsxs)(o.A,{sx:p?{maxHeight:"40vh",overflowY:"auto"}:{},children:[!d&&g.isOutdated&&(0,i.jsx)(eS,{tabSize:f??4,thread:g}),g.commentsData.comments.map((e,t)=>(0,i.jsx)(eC,{isAnchorable:!0,index:t,isLastChild:t===g.commentsData.comments.length-1,anchorPrefix:n,comment:e,commentConnectionId:g.commentsData.__id,commentingImplementation:r,filePath:l,isOutdated:g.isOutdated,repositoryId:u,subject:m,subjectId:h,threadId:g.id,onRefreshThread:c,onQuoteReply:L,threadCommentCount:g.commentsData.comments.length,threadsConnectionId:x,isThreadResolved:!!g.isResolved,suggestedChangesConfig:y,applySuggestedChangesValidationData:_,viewerData:b,ghostUser:N},e.id)),g.viewerCanReply&&(0,i.jsxs)(o.A,{sx:{backgroundColor:"canvas.inset",borderBottomLeftRadius:2,borderBottomRightRadius:2,p:2},children:[v&&(0,i.jsx)(j,{batchingEnabled:e,batchPending:t,commentBoxConfig:r.commentBoxConfig,condensed:!1,fileLevelComment:!0,filePath:l,focusOnMount:!0,isReplying:!0,onCancelComment:()=>{S(!1),E("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},repositoryId:u,quotedText:T,subjectId:h,threadId:g.id,onAddComment:({commentText:e,onCompleted:t,onError:n,submitBatch:i})=>{let r=[];g.commentsData.__id&&r.push(g.commentsData.__id),a&&r.push(a),D({commentsConnectionIds:r,filePath:l,thread:g,text:e,submitBatch:i,onCompleted:e=>{e&&er(e.toString()),t?.(),c?.(g.id)},onError:n,threadsConnectionId:x}),E("comments.add","ADD_COMMENT_BUTTON")},suggestedChangesConfig:y}),!v&&(0,i.jsx)(ei.z,{onClick:()=>{E("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),S(!0)},children:"Write a reply"})]})]})})}try{eT.displayName||(eT.displayName="ReviewThread")}catch{}function eA({children:e}){return(0,i.jsx)(F.A,{sx:{fontWeight:500,color:"fg.default"},children:e})}function eE({thread:e}){return void 0!==e&&e?.diffSide&&e.line?e.startLine&&e.startDiffSide?eL({thread:e}):eD({thread:e}):null}function eD({thread:e}){let t="LEFT"===e.startDiffSide?"L":"R";return(0,i.jsxs)(F.A,{sx:{color:"fg.muted",pl:2},children:["Comment on lines"," ",(0,i.jsxs)(eA,{children:[t,e.line]})]})}function eL({thread:e}){let t="LEFT"===e.startDiffSide?"L":"R",n="LEFT"===e.diffSide?"L":"R";return(0,i.jsxs)(F.A,{sx:{color:"fg.muted",pl:2},children:["Comment on lines"," ",(0,i.jsxs)(eA,{children:[t,e.startLine]})," ","to"," ",(0,i.jsxs)(eA,{children:[n,e.line]})]})}function eI({commentingImplementation:e,filePath:t,onClose:n,onRefreshThread:r,thread:a,threads:l,threadsConnectionId:d,markerNavigationImplementation:c,ghostUser:u,...m}){let{sendAnalyticsEvent:h}=(0,C.s)(),{resolveThread:f,unresolveThread:g,resolvingEnabled:x}=e,p=l.find(e=>e.id===a.id),y=a.commentsData.comments.length>0,b=!!a.isResolved,{addToast:j}=(0,ee.Y6)(),N=p?.commentsConnectionId;return y?(0,i.jsxs)(o.A,{sx:{width:"clamp(240px, 100vw, 540px)"},children:[(0,i.jsx)(o.A,{sx:{borderBottom:"1px solid",borderBottomColor:"border.default",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",p:1,background:"canvas.default"},children:(0,i.jsxs)(o.A,{sx:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center"},children:[(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(z,{markerId:a.id,markerNavigationImplementation:c,onNavigate:n}),(0,i.jsx)(eE,{thread:p})]}),(0,i.jsxs)(o.A,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center",justifyContent:"right",flexGrow:1},children:[b&&(0,i.jsx)(et.A,{variant:"done",size:"large",children:"Resolved"}),x&&(0,i.jsx)(en.m,{text:b?"Unresolve conversation":"Resolve conversation",type:"label",direction:"w",id:"resolve-conversation",children:(0,i.jsx)($.K,{"aria-labelledby":"resolve-conversation",unsafeDisableTooltip:!0,icon:b?H.CheckCircleFillIcon:H.CheckCircleIcon,sx:{color:b?"var(--fgColor-done, var(--color-done-fg)) !important":void 0},variant:"invisible",onClick:b?()=>{g({thread:a,onCompleted:()=>r(a.id),onError:()=>{j({type:"error",message:"Failed to unresolve thread"})}}),h("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON")}:()=>{f({thread:a,onCompleted:()=>r(a.id),onError:()=>{j({type:"error",message:"Failed to resolve thread"})}}),h("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON")}})}),(0,i.jsx)($.K,{unsafeDisableTooltip:!0,"aria-label":"Close thread",icon:H.XIcon,variant:"invisible",onClick:n})]})]})}),(0,i.jsx)(s.Suspense,{fallback:(0,i.jsxs)(o.A,{sx:{height:"90px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",color:"fg.muted",fontSize:0},children:[(0,i.jsx)(T.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),children:(0,i.jsx)(eT,{commentingImplementation:e,commentsConnectionId:N,filePath:t,onRefreshThread:r,thread:a,threadsConnectionId:d,...m,ghostUser:u})})]}):null}try{eA.displayName||(eA.displayName="Emphasis")}catch{}try{eE.displayName||(eE.displayName="ThreadBanner")}catch{}try{eD.displayName||(eD.displayName="SingleLineThreadBanner")}catch{}try{eL.displayName||(eL.displayName="MultineLineThreadBanner")}catch{}try{eI.displayName||(eI.displayName="ReviewThreadDialog")}catch{}function e_(e){return(0,i.jsx)(B,{children:(0,i.jsx)(ek,{...e})})}function ek({annotations:e,commentingImplementation:t,conversationAnchorRef:n,conversationListAnchorRef:r,conversationListThreads:a,isMarkerListOpen:l,fileAnchor:d,filePath:c,onAnnotationSelected:u,onCloseConversationDialog:m,onCloseConversationList:h,onThreadSelected:f,returnFocusRef:g,selectedAnnotationId:x,selectedThreadId:p,threadsConnectionId:y,markerNavigationImplementation:b,suggestedChangesConfig:j,ghostUser:C,...N}){let{isDialogOpen:v}=P(),[S,A]=(0,s.useState)(),{fetchThread:E}=t,D=(0,s.useCallback)(()=>!v&&m(),[v,m]),L=async e=>{A(void 0);let t=a.find(t=>t.id===e)?.isOutdated;A(await E(e,t))},I=(0,s.useMemo)(()=>{if(d&&S&&S.subject?.startDiffSide&&S.subject?.endDiffSide&&S.subject?.startLine&&S.subject?.endLine&&j?.configureSuggestedChangesFromLineRange){let e=S.subject?.startLine??S?.subject?.endLine,t=S.subject?.startDiffSide??S?.subject?.endDiffSide,n={diffAnchor:d,endLineNumber:S?.subject?.endLine,endOrientation:S.subject?.endDiffSide==="LEFT"?"left":"right",startLineNumber:e,firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===t?"left":"right",startOrientation:"LEFT"===t?"left":"right"};return j?.configureSuggestedChangesFromLineRange(n)}},[d,S,j]);(0,s.useEffect)(()=>{!p&&S?A(void 0):p&&p!==S?.id&&L(p)},[E,p]);let _=p||x,k=x?e.find(e=>e.id===x):void 0;return(0,i.jsx)(i.Fragment,{children:_?(0,i.jsx)(O.T,{align:"end",anchorRef:n,focusZoneSettings:{disabled:!0},open:!0,focusTrapSettings:{disabled:!0},renderAnchor:null,overlayProps:{anchorSide:"outside-right","aria-label":`${p?"Pull Request Review Thread":"Pull Request Check Annotation"}`,id:"conversation-dialog",returnFocusRef:g,role:"dialog",sx:{width:"clamp(240px, 100vw, 540px)",borderRadius:2},onClickOutside:w.l,onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()},portalContainerName:b.overlayPortalContainerName},onClose:D,children:S?(0,i.jsx)(eI,{commentingImplementation:t,filePath:c,thread:S,threads:a,threadsConnectionId:y,onClose:D,onThreadSelected:f,onRefreshThread:L,markerNavigationImplementation:b,suggestedChangesConfig:I,ghostUser:C,...N}):k?(0,i.jsx)(W,{annotation:k,markerNavigationImplementation:b,onClose:D,ghostUser:C}):(0,i.jsxs)(o.A,{sx:{height:"90px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",color:"fg.muted",fontSize:0},children:[(0,i.jsx)(T.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]})}):l&&(0,i.jsx)(Z,{anchorRef:r,annotations:e,handleOpenChange:h,threads:a,onShowCommentThread:f,onShowAnnotation:u,ghostUser:C})})}function eR({id:e}){let t=(0,s.useRef)(null);return(0,s.useEffect)(()=>{t.current&&(0,U.c)(t.current,e)},[e]),(0,i.jsx)("span",{id:e,ref:t,style:{position:"absolute",top:0,right:0,zIndex:10}})}try{e_.displayName||(e_.displayName="Markers")}catch{}try{ek.displayName||(ek.displayName="MarkersInternal")}catch{}try{eR.displayName||(eR.displayName="MarkerPortalRoot")}catch{}var ew=n(84217);function eO({addCommentDialogTitle:e,isLeftSide:t,filePath:n,lineNumber:r,onAddComment:a,onClose:s,viewerData:l,threadsConnectionId:d,...c}){return(0,i.jsxs)(o.A,{sx:{px:2,pb:2,pt:1},children:[(0,i.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsxs)(ew.A,{as:"h4",sx:{fontSize:1,ml:2,py:2},children:[(0,i.jsx)(K.r,{alt:l.login,size:24,src:l.avatarUrl||"",sx:{mr:2}}),(0,i.jsx)("span",{children:e??"Add a comment"})]}),s&&(0,i.jsx)($.K,{unsafeDisableTooltip:!0,variant:"invisible",icon:H.XIcon,onClick:s,"aria-label":"Cancel"})]}),(0,i.jsx)(j,{focusOnMount:!0,condensed:!1,fileLevelComment:!1,filePath:n,lineNumber:r,onAddComment:({commentText:e,onCompleted:t,onError:i,submitBatch:r})=>{a({text:e,onError:i,onCompleted:(e,n)=>{n&&er(n.toString()),t?.(e,n)},submitBatch:r,filePath:n,threadsConnectionId:d})},onCancelComment:s,side:t?"LEFT":"RIGHT",...c})]})}try{eO.displayName||(eO.displayName="StartThreadComment")}catch{}function eU({align:e="end",anchorRef:t,isOpen:n,returnFocusRef:r,onCloseCommentDialog:a,suggestedChangesConfig:o,...l}){let{sendAnalyticsEvent:d}=(0,C.s)(),c=(0,s.useMemo)(()=>{if(n&&o?.configureSuggestedChangesFromLineRange)return o.configureSuggestedChangesFromLineRange(o?.selectedDiffRowRange,o?.shouldStartNewConversationWithSuggestedChange)},[n,o]);return n?(0,i.jsx)(O.T,{align:e,anchorRef:t,focusZoneSettings:{disabled:!0},open:n,renderAnchor:null,focusTrapSettings:{disabled:!0},overlayProps:{id:"conversation-dialog",role:"dialog",width:"xlarge",returnFocusRef:r,sx:{borderRadius:2},"aria-label":"Add a comment",onClickOutside:w.l,onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()}},onClose:a,children:(0,i.jsx)(eO,{onClose:()=>{a(),d("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},suggestedChangesConfig:c,...l})}):null}try{eU.displayName||(eU.displayName="StartConversation")}catch{}n(71918),n(35993)},76919:(e,t,n)=>{function i(e,t){return t.some(t=>r(t,e))}function r(e,t){return e.commentId===t.commentId&&e.path===t.path&&e.suggestion.length===t.suggestion.length&&a(e.suggestion,t.suggestion)}n.d(t,{EJ:()=>l,Lm:()=>d,c0:()=>i,o_:()=>s,yM:()=>r});let a=(e,t)=>e.length===t.length&&!e.some((e,n)=>e!==t[n]),o={USER_CANNOT_APPLY_SUGGESTION:"You do not have permission to apply this suggestion.",PULL_REQUEST_IS_CLOSED:"This suggestion cannot be applied because the pull request is closed.",PULL_REQUEST_IS_IN_MERGE_QUEUE:"This suggestion cannot be applied because the pull request is queued to merge.",IS_OUTDATED:"This suggestion is outdated and cannot be applied.",IS_PENDING:"This suggestion is part of a pending comment and cannot be applied.",IS_RESOLVED:"This suggestion is part of a resolved comment and cannot be applied.",UNCHANGED_CODE:"This suggestion is invalid because no changes were made to the code.",INVALID_RANGE:"Unable to commit due to other pending changes affecting this line.",BATCH_TOO_BIG:"Unable to commit due to too many changes in the batch.",DELETED_LINES:"Unable to apply suggestions on deleted lines.",RANGE_NOT_PROVIDED:"This suggestion does not have a valid line range.",UNABLE_TO_DETERMINE_VALIDITY:"Unable to determine the validity of this suggestion."};function s({suggestedChange:e,isOutdated:t,isPending:n,isResolved:i,pullRequestIsClosed:r,pullRequestIsInMergeQueue:a,userCanApplySuggestion:s,applySuggestedChangesValidationData:l,suggestedChangesConfig:d}){let{lineRange:c}=l;if(t)return{isValid:!1,reason:o.IS_OUTDATED};if(n)return{isValid:!1,reason:o.IS_PENDING};if(i)return{isValid:!1,reason:o.IS_RESOLVED};if(r)return{isValid:!1,reason:o.PULL_REQUEST_IS_CLOSED};if(a)return{isValid:!1,reason:o.PULL_REQUEST_IS_IN_MERGE_QUEUE};if(!s)return{isValid:!1,reason:o.USER_CANNOT_APPLY_SUGGESTION};if(!c)return{isValid:!1,reason:o.RANGE_NOT_PROVIDED};if(!d)return{isValid:!1,reason:o.UNABLE_TO_DETERMINE_VALIDITY};if(!d?.isValidSuggestionRange)return{isValid:!1,reason:o.DELETED_LINES};let u=d?.sourceContentFromDiffLines,m=e.suggestion.join("\n");return 0!==e.suggestion.length&&m===u?{isValid:!1,reason:o.UNCHANGED_CODE}:{isValid:!0}}function l(e,t){let n={isValid:!1,reason:o.INVALID_RANGE},i={isValid:!1,reason:o.BATCH_TOO_BIG};return t.length>=50?i:t.find(t=>t.threadId===e.threadId)||function(e,t){for(let r of t)if(e.path===r.path){var n,i;return n=e.lineRange,i=r.lineRange,n.endLineNumber>=i.startLineNumber&&n.startLineNumber<=i.endLineNumber}return!1}(e,t)?n:{isValid:!0}}function d(e){if(!e||"LINE"!==e.subjectType||!e.subject)return;let t=e.subject.startDiffSide??e.subject.endDiffSide;if(!t)return;if(e.isOutdated&&e.subject.originalStartLine&&e.subject.originalEndLine)return{endLineNumber:e.subject.originalEndLine,endOrientation:e.subject.endDiffSide||"RIGHT",startLineNumber:e.subject.originalStartLine,startOrientation:t};if(!e.subject.endLine||!e.subject.endDiffSide)return;let n=e.subject.startLine??e?.subject.endLine;return{endLineNumber:e.subject.endLine,endOrientation:e.subject.endDiffSide,startLineNumber:n,startOrientation:t||"RIGHT"}}},71918:(e,t,n)=>{n.d(t,{ab:()=>o});var i=n(67726),r=n(35993);function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function o(e){let t=a();return{id:t,__id:t,annotationLevel:e.annotationLevel??r.U.Warning,databaseId:e.databaseId??Math.floor(1e3*Math.random()),location:{start:{line:e.location?.start?.line??1},end:{line:e.location?.end?.line??1}},message:e.message??"message",rawDetails:e.rawDetails??"raw details",path:e.path??"my-file-path",pathDigest:e.pathDigest??a(),title:e.title??"annotation-title",checkRun:{name:e.checkRun?.name??"check-run-name",detailsUrl:e.checkRun?.detailsUrl?e.checkRun.detailsUrl:e.checkRun?.detailsUrl==null?null:"http://github.localhost/monalisa/smile/actions/runs/1/job/1"},checkSuite:{name:e.checkSuite?.name??"check-suite-name",app:e.checkSuite?.app?e.checkSuite.app:e.checkSuite?.app==null?null:{name:"github-app",logoUrl:"http://alambic.github.localhost/avatars/u/2"}}}}i.l,i.l,i.l,i.l,i.l,i.l,i.l,i.l,i.l,i.l,i.l,i.l,i.l,i.l,i.l},35993:(e,t,n)=>{var i;n.d(t,{U:()=>i}),function(e){e.Failure="FAILURE",e.Notice="NOTICE",e.Warning="WARNING"}(i||(i={}))},51888:(e,t,n)=>{function i(e){return`line-${e}`}function r(e,t,n){return`${e}${"left"===t?"L":"R"}${n}`}function a(e){return"DELETION"===e?"left":"right"}function o(e,t=!1,n=!1){if(n)return"var(--bgColor-attention-muted, var(--color-attention-subtle))";switch(e){case"ADDITION":return t?"var(--diffBlob-additionNum-bgColor, var(--diffBlob-addition-bgColor-num))":"var(--diffBlob-additionLine-bgColor, var(--diffBlob-addition-bgColor-line))";case"DELETION":return t?"var(--diffBlob-deletionNum-bgColor, var(--diffBlob-deletion-bgColor-num))":"var(--diffBlob-deletionLine-bgColor, var(--diffBlob-deletion-bgColor-line))";case"HUNK":return t?"var(--diffBlob-hunkNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-hunkLine-bgColor, var(--bgColor-accent-muted))";case"EMPTY":return t?"var(--diffBlob-emptyNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-emptyLine-bgColor, var(--bgColor-accent-muted))";default:return}}function s(e){let t=0;if(e)for(let n of e)t=Math.max(t,n?.left??0,n?.right??0);return Math.max(8*t.toString().length+20,40).toString()}n.d(t,{IQ:()=>r,Sq:()=>i,XU:()=>a,c7:()=>s,gK:()=>o})},94640:(e,t,n)=>{n.d(t,{Jg:()=>d,nq:()=>u,uP:()=>m.u,zl:()=>h.z,$e:()=>p,P3:()=>g,wj:()=>y,l4:()=>S,Qe:()=>b,Ah:()=>A});var i=n(74848),r=n(20053),a=n(22084),o=n(51888);let s=e=>{let{dragging:t,isHighlighted:n,isLeftColumn:s,colSpan:l,line:d,lineAnchor:c}=e,u=d.html,m="";return["ADDITION","DELETION"].includes(d.type)&&["+","-"].includes(u[0])&&(m=u[0],u=u.slice(1)),(0,i.jsx)("td",{className:(0,r.$)("diff-text-cell",{"border-left color-border-accent-emphasis":t&&n,"border-right":s&&"HUNK"!==d.type}),colSpan:l,id:c?(0,o.Sq)(c):void 0,style:{backgroundColor:(0,o.gK)(d.type,!1,n)},children:(0,i.jsxs)("code",{"data-code-marker":m,className:(0,r.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===d.type,deletion:"DELETION"===d.type}),children:[e.lineChild,(0,i.jsx)(a.mo,{className:(0,r.$)("diff-text-inner",{"color-fg-muted":"HUNK"===d.type}),html:u,style:{marginLeft:"CONTEXT"===d.type?"-7px":void 0}})]})})};try{s.displayName||(s.displayName="DiffText")}catch{}let l=({ariaLabel:e,children:t,hasExpanderButton:n,lineType:a,colSpan:s,interactiveProps:l,isHighlighted:d,...c})=>{let u=(0,i.jsx)("code",{className:"pr-2",children:t});return l&&(u=(0,i.jsx)("button",{className:"diff-line-number-button",...l,"aria-label":e,children:u})),(0,i.jsx)("td",{"aria-label":l?void 0:e,"data-line-number":!0,className:(0,r.$)("diff-line-number",{"has-expander":n,clickable:!!l}),colSpan:s||1,style:{backgroundColor:(0,o.gK)(a,!0,d)},...c,children:u})};try{l.displayName||(l.displayName="LineNumber")}catch{}let d=({dragging:e,isHighlighted:t,isLeftColumn:n,isSplit:r,lineAnchor:a,line:o,lineChild:d,onLineNumberClick:c})=>{let u="CONTEXT"===o.type||"INJECTED_CONTEXT"===o.type,m="ADDITION"!==o.type,h=m||!r,f="DELETION"!==o.type,g=f&&!u||!r,x=r&&u?n?o.left:o.right:o.left;return(0,i.jsxs)(i.Fragment,{children:[h&&(0,i.jsx)(l,{ariaLabel:`Line ${m?o.left?.toString():o.right?.toString()}`,lineType:o.type,interactiveProps:c?{onClick:c}:null,isHighlighted:t,children:m&&x}),g&&(0,i.jsx)(l,{ariaLabel:`Line ${f?o.right?.toString():o.left?.toString()}`,lineType:o.type,interactiveProps:c?{onClick:c}:null,isHighlighted:t,children:f&&o.right}),(0,i.jsx)(s,{dragging:e,isHighlighted:t,isLeftColumn:n,line:o,lineAnchor:a,lineChild:d})]})};try{d.displayName||(d.displayName="DiffLinePart")}catch{}var c=n(75177);function u(){return(0,i.jsx)(c.A,{"aria-hidden":"true",as:"svg",version:"1.1",viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",sx:{bottom:"0 !important",clip:"rect(1px, 1px, 1px, 1px)",clipPath:"inset(50%)",height:"84px",position:"absolute",width:"320px"},children:(0,i.jsxs)("defs",{children:[(0,i.jsxs)("clipPath",{id:"diff-placeholder",children:[(0,i.jsx)("rect",{height:"11.9298746",rx:"2",width:"67.0175439",x:"0",y:"0"}),(0,i.jsx)("rect",{height:"11.9298746",rx:"2",width:"100.701754",x:"18.9473684",y:"47.7194983"}),(0,i.jsx)("rect",{height:"11.9298746",rx:"2",width:"37.8947368",x:"0",y:"71.930126"}),(0,i.jsx)("rect",{height:"11.9298746",rx:"2",width:"53.3333333",x:"127.017544",y:"48.0703769"}),(0,i.jsx)("rect",{height:"11.9298746",rx:"2",width:"72.9824561",x:"187.719298",y:"48.0703769"}),(0,i.jsx)("rect",{height:"11.9298746",rx:"2",width:"140.350877",x:"76.8421053",y:"0"}),(0,i.jsx)("rect",{height:"11.9298746",rx:"2",width:"140.350877",x:"17.8947368",y:"23.8597491"}),(0,i.jsx)("rect",{height:"11.9298746",rx:"2",width:"173.684211",x:"166.315789",y:"23.8597491"})]}),(0,i.jsxs)("linearGradient",{id:"animated-diff-gradient",spreadMethod:"reflect",x1:"0",x2:"0",y1:"0",y2:"1",children:[(0,i.jsx)("stop",{offset:"0",stopColor:"#eee"}),(0,i.jsx)("stop",{offset:"0.2",stopColor:"#eee"}),(0,i.jsx)("stop",{offset:"0.5",stopColor:"#ddd"}),(0,i.jsx)("stop",{offset:"0.8",stopColor:"#eee"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#eee"}),(0,i.jsx)("animateTransform",{attributeName:"y1",dur:"1s",repeatCount:"3",values:"0%; 100%; 0"}),(0,i.jsx)("animateTransform",{attributeName:"y2",dur:"1s",repeatCount:"3",values:"100%; 200%; 0"})]})]})})}try{u.displayName||(u.displayName="DiffPlaceholder")}catch{}var m=n(73560),h=n(97394),f=n(38621);function g({currentLine:e,hunkButton:t,isLeftColumn:n,isSplit:r}){return r&&!n?null:(0,i.jsxs)(i.Fragment,{children:[t?(0,i.jsx)(l,{colSpan:r?1:2,hasExpanderButton:!0,lineType:e.type,children:t}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l,{lineType:e.type,children:(0,i.jsx)(f.KebabHorizontalIcon,{})}),!r&&(0,i.jsx)(l,{lineType:e.type,children:(0,i.jsx)(f.KebabHorizontalIcon,{})})]}),(0,i.jsx)(s,{isHighlighted:!1,isLeftColumn:!0,colSpan:r?3:void 0,line:e})]})}try{g.displayName||(g.displayName="HunkHeaderDiffLine")}catch{}function x(){return(0,i.jsx)("div",{className:"hunk-kebab-icon pr-2 pb-1",children:(0,i.jsx)(f.KebabHorizontalIcon,{})})}try{x.displayName||(x.displayName="HunkKebabIcon")}catch{}function p({isLeftColumn:e}){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l,{lineType:"EMPTY"}),(0,i.jsx)("td",{className:(0,r.$)("empty-diff-line",{"border-right":e}),colSpan:1})]})}try{p.displayName||(p.displayName="EmptyDiffLine")}catch{}function y(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("thead",{className:"sr-only",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{scope:"col",children:"Original file line number"}),(0,i.jsx)("th",{scope:"col",children:"Original file line"}),(0,i.jsx)("th",{scope:"col",children:"Diff line number"}),(0,i.jsx)("th",{scope:"col",children:"Diff line change"})]})}),(0,i.jsxs)("colgroup",{children:[(0,i.jsx)("col",{width:e.lineWidth}),(0,i.jsx)("col",{}),(0,i.jsx)("col",{width:e.lineWidth}),(0,i.jsx)("col",{})]}),(0,i.jsx)("tbody",{children:e.children})]})}try{y.displayName||(y.displayName="SplitDiffTable")}catch{}function b(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("thead",{className:"sr-only",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{scope:"col",children:"Original file line number"}),(0,i.jsx)("th",{scope:"col",children:"Diff line number"}),(0,i.jsx)("th",{scope:"col",children:"Diff line change"})]})}),(0,i.jsxs)("colgroup",{children:[(0,i.jsx)("col",{width:e.lineWidth}),(0,i.jsx)("col",{width:e.lineWidth}),(0,i.jsx)("col",{width:"100%"})]}),(0,i.jsx)("tbody",{children:e.children})]})}try{b.displayName||(b.displayName="UnifiedDiffTable")}catch{}let j={diffTextCell:"UnifiedDiffLines-module__diffTextCell--UAuIr",diffHunkCell:"UnifiedDiffLines-module__diffHunkCell--qPkzg",diffHunkText:"UnifiedDiffLines-module__diffHunkText--Sfwuu",diffTextInner:"UnifiedDiffLines-module__diffTextInner--IuEAA",diffTextMarker:"UnifiedDiffLines-module__diffTextMarker--MdAo4",syntaxHighlightedAdditionLine:"UnifiedDiffLines-module__syntaxHighlightedAdditionLine--lU_S2",syntaxHighlightedDeletionLine:"UnifiedDiffLines-module__syntaxHighlightedDeletionLine--xgQwN",diffLineNumber:"UnifiedDiffLines-module__diffLineNumber--bzzxf"};function C({line:e,children:t}){return(0,i.jsx)("td",{className:j.diffLineNumber,style:{backgroundColor:(0,o.gK)(e.type,!0),textAlign:"center"},children:(0,i.jsx)("code",{children:t})})}function N({line:e}){return(0,i.jsx)("td",{colSpan:4,className:j.diffHunkCell,valign:"top",children:(0,i.jsxs)("div",{className:"d-flex flex-row",children:[(0,i.jsx)(x,{}),(0,i.jsx)("code",{className:j.diffHunkText,children:(0,i.jsx)(a.mo,{className:(0,r.$)(j.diffTextInner,"color-fg-muted"),html:e.html})})]})})}function v({line:e}){let t="HUNK"===e.type,n="ADDITION"!==e.type,s="DELETION"!==e.type,l="ADDITION"===e.type?"+":"DELETION"===e.type?"-":void 0;return(0,i.jsxs)("tr",{children:[t&&(0,i.jsx)(N,{line:e}),!t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(C,{line:e,children:n&&e.left}),(0,i.jsx)(C,{line:e,children:s&&e.right}),(0,i.jsx)("td",{className:j.diffTextCell,style:{backgroundColor:(0,o.gK)(e.type,!1)},children:(0,i.jsxs)("code",{className:(0,r.$)("ADDITION"===e.type&&j.syntaxHighlightedAdditionLine,"DELETION"===e.type&&j.syntaxHighlightedDeletionLine),children:[!!l&&(0,i.jsx)("span",{className:j.diffTextMarker,children:l}),(0,i.jsx)(a.mo,{className:j.diffTextInner,html:e.html,style:{backgroundColor:(0,o.gK)(e.type,!1)}})]})})]})]})}function S({sx:e,lines:t,lineWidth:n,tabSize:r}){let a=t.map((e,t)=>(0,i.jsx)(v,{line:e,tabSize:r},t));return(0,i.jsx)(c.A,{as:"table",className:"tab-size","data-tab-size":r,sx:{borderTop:0,borderBottom:0,borderLeft:1,borderRight:1,borderStyle:"solid",borderColor:"border.muted",...e},children:(0,i.jsx)(b,{lineWidth:n,children:a})})}try{C.displayName||(C.displayName="LineNumberCell")}catch{}try{N.displayName||(N.displayName="HunkCell")}catch{}try{v.displayName||(v.displayName="UnifiedDiffRow")}catch{}try{S.displayName||(S.displayName="UnifiedDiffLines")}catch{}function T(e){return"LEFT"===e?"-":"RIGHT"===e?"+":""}function A({startDiffSide:e,endDiffSide:t,originalStartLine:n,originalEndLine:i}){return e&&t&&"number"==typeof n&&"number"==typeof i?0===n&&1===i&&e===t?"-1 to +1":e===t&&n===i?`${T(e)}${n}`:`${T(e)}${n} to ${T(t)}${i}`:""}},96711:(e,t,n)=>{n.d(t,{z:()=>a});var i=n(74848),r=n(75177);let a=({onClick:e,id:t,children:n})=>(0,i.jsx)(r.A,{as:"button",type:"button",id:t,sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"left",fontWeight:400,color:"fg.muted",width:"100%",backgroundColor:"canvas.default",border:"1px solid",borderColor:"border.default",cursor:"text",borderRadius:2,height:"var(--control-medium-size)",lineHeight:"var(--text-body-lineHeight-medium)",px:2},onClick:e,children:n});try{a.displayName||(a.displayName="CompactCommentButton")}catch{}},76889:(e,t,n)=>{n.d(t,{Y:()=>g});var i=n(74848),r=n(82667),a=n(22868),o=n(38621),s=n(75177),l=n(52464),d=n(30631),c=n(55847),u=n(30729),m=n(35993),h=n(83994);let f={[m.U.Failure]:(0,i.jsx)(u.A,{icon:o.StopIcon,sx:{fill:"danger.fg"}}),[m.U.Warning]:(0,i.jsx)(u.A,{icon:o.AlertIcon,sx:{fill:"attention.fg"}}),[m.U.Notice]:(0,i.jsx)(u.A,{icon:o.InfoIcon,sx:{fill:"fg.muted"}})};function g({annotation:e,ghostUser:t=r.t.ghostUser}){let n=e.checkSuite.app;return(0,i.jsxs)(s.A,{sx:{borderLeft:"6px solid",borderColor:h.GF[e.annotationLevel].primaryColor,p:4},children:[(0,i.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[f[e.annotationLevel],(0,i.jsx)(l.A,{sx:{fontWeight:600,color:"fg.muted",fontSize:0,pl:2},children:h.GF[e.annotationLevel].ariaLabel})]}),(0,i.jsx)(l.A,{sx:{color:h.GF[e.annotationLevel].primaryColor,fontWeight:600,fontSize:1},children:e.title}),(0,i.jsx)(s.A,{sx:{mb:3,mt:1},children:e.message&&(0,i.jsx)(l.A,{sx:{fontFamily:"var(--fontStack-monospace)",fontSize:0,display:"-webkit-box",overflow:"hidden","-webkit-box-orient":"vertical","-webkit-line-clamp":"8",maxWidth:"unset"},children:e.message})}),(0,i.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,i.jsxs)(s.A,{sx:{flexGrow:2},children:[(0,i.jsx)(a.r,{src:n?.logoUrl??t.avatarUrl,alt:`${n?.name??t.login} avatar image`,"data-testid":"check-suite-app-avatar"}),(0,i.jsxs)(d.A,{sx:{ml:2,maxWidth:"300px"},inline:!0,title:`${e.checkSuite.name} / ${e.checkRun.name}`,children:[(0,i.jsx)(l.A,{sx:{fontWeight:600,fontSize:0},children:e.checkSuite.name})," /"," ",(0,i.jsx)(l.A,{sx:{fontSize:0},children:e.checkRun.name})]})]}),e.checkRun.detailsUrl&&(0,i.jsx)(c.Q,{as:"a",href:e.checkRun.detailsUrl,size:"small",children:"View details"})]})]})}try{g.displayName||(g.displayName="Annotation")}catch{}},83994:(e,t,n)=>{n.d(t,{GF:()=>d,S:()=>l,Xh:()=>o});var i=n(74848),r=n(38267),a=n(35993);function o({annotationLevel:e,...t}){let{icon:n,...r}=d[e];return function({fill:e,stroke:t,ariaLabel:n,svgHtml:r,className:a}){return(0,i.jsx)("svg",{"aria-label":n,className:a,fill:e,height:"24",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",style:{boxShadow:"none"},viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:r})}({...n,...r,...t})}let s=(0,r.i7)(["0%{opacity:0;}100%{opacity:1;}"]),l=(0,r.Ay)(o).withConfig({displayName:"AnnotationIcon__AnimatedAnnotationIcon",componentId:"sc-306ab24a-0"})(["animation:"," 0.1s ease-in;"],s),d={[a.U.Failure]:{priority:1,ariaLabel:"Check failure",primaryColor:"danger.fg",icon:{fill:"var(--bgColor-danger-emphasis, var(--color-danger-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"15",x2:"9",y1:"9",y2:"15"}),(0,i.jsx)("line",{x1:"9",x2:"15",y1:"9",y2:"15"})]})}},[a.U.Warning]:{priority:2,ariaLabel:"Check warning",primaryColor:"attention.fg",icon:{fill:"var(--bgColor-attention-emphasis, var(--color-attention-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"16"})]})}},[a.U.Notice]:{priority:3,ariaLabel:"Check notice",primaryColor:"fg.muted",icon:{fill:"var(--bgColor-neutral-emphasis, var(--color-neutral-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"8"})]})}}};try{o.displayName||(o.displayName="AnnotationIcon")}catch{}try{l.displayName||(l.displayName="AnimatedAnnotationIcon")}catch{}},73560:(e,t,n)=>{n.d(t,{u:()=>o});var i=n(74848),r=n(20053);let a={diffSquare:"DiffSquares-module__diffSquare--h5kjy",addition:"DiffSquares-module__addition--jeNtt",deletion:"DiffSquares-module__deletion--hKV3q",neutral:"DiffSquares-module__neutral--VlyoP"};function o({squares:e}){return(0,i.jsx)("div",{className:"d-flex",children:e.map((e,t)=>(0,i.jsx)("div",{"data-testid":`${e} diffstat`,className:(0,r.$)(a.diffSquare,a[e])},t))})}try{o.displayName||(o.displayName="DiffSquares")}catch{}},97394:(e,t,n)=>{n.d(t,{z:()=>s});var i=n(74848),r=n(94977),a=n(73560);let o={addition:"addition",deletion:"deletion",neutral:"neutral"};function s({linesAdded:e=0,linesDeleted:t=0,linesChanged:n=0,tooltipDirection:s}){if(!e&&!t&&!n||0===n)return null;let{greenSquares:l,redSquares:d,graySquares:c}=function(e,t,n){let i=n>5?5/n:1,r=Math.floor(e*i),a=Math.floor(t*i);return{greenSquares:r,redSquares:a,graySquares:5-r-a}}(e,t,n),u=[...Array(l).fill(o.addition),...Array(d).fill(o.deletion),...Array(c).fill(o.neutral)];return(0,i.jsxs)("div",{className:"d-flex flex-items-center gap-1 pl-1",children:[e>0&&(0,i.jsxs)("span",{className:"f6 text-bold fgColor-success",children:["+",e]}),t>0&&(0,i.jsxs)("span",{className:"f6 text-bold fgColor-danger",children:["-",t]}),(0,i.jsx)(r.A,{"aria-label":function({linesAdded:e,linesChanged:t,linesDeleted:n}){return`${t} ${1===t?"change":"changes"}: ${e} ${1===e?"addition":"additions"} & ${n} ${1===n?"deletion":"deletions"}`}({linesAdded:e,linesChanged:n,linesDeleted:t}),direction:s??"e",children:(0,i.jsx)(a.u,{squares:u})})]})}try{s.displayName||(s.displayName="DiffStats")}catch{}},34306:(e,t,n)=>{n.d(t,{e:()=>a});var i=n(74848),r=n(92979);function a(){return(0,i.jsx)("div",{className:"d-flex flex-wrap gap-1",children:(0,i.jsx)(r.O,{variant:"elliptical",height:"28px",width:"28px"})})}try{a.displayName||(a.displayName="ReactionViewerLoading")}catch{}}}]);
//# sourceMappingURL=ui_packages_conversations_conversations_ts-8d9817ebc969.js.map